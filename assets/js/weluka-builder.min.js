(function(d,t){var p={},b={_builderContentId:".weluka-builder-content",_builderSnippetId:"#weluka-builder-snippets",_currentWidgetEditInfo:[],_currentEditTargetName:null,_currentCodeEditorTarget:{elm:null,widgetType:null,sourceHtmls:null,retHtml:null},_dragEnabled:!1,_currentDragElement:{},_singleImgFrame:null,_multipleImgFrame:null,_wpLink:parent.wpLink,_curWpLinkElm:null,_columMaxNum:12,_currentPanelEditData:{},_init:function(){b._setBindEvents();b._setOverlayEvents();b._setWidgetNavPopover();b._setSortable();
d().dndPageScroll()},_setBindEvents:function(){d("body").on("click","a",b._linkClicked);d(b._builderContentId).on("click","a",b._linkClicked);if(d("#weluka-builder-widget-toggle-switch").length)d("#weluka-builder-widget-toggle-switch").on("click",b._widgetNavToggle);b._negativeMarginClear();d("body").on("click",b._builderContentId+" .weluka-widget-overlay .weluka-overlay-title",{target:"widget"},b._widgetDefaultAction);d("body").on("dblclick",b._builderContentId+" .weluka-widget-overlay",{target:"widget"},
b._widgetDefaultAction);d("body").on("click",b._builderContentId+" .weluka-widget-remove",{target:"widget"},b._widgetRemove);d("body").on("click",b._builderContentId+" .weluka-widget-setting",{target:"widget"},b._widgetSetting);d("body").on("click",b._builderContentId+" .weluka-col-overlay .weluka-overlay-title",{target:"col"},b._widgetDefaultAction);d("body").on("dblclick",b._builderContentId+" .weluka-col-overlay",{target:"col"},b._widgetDefaultAction);d("body").on("click",b._builderContentId+" .weluka-col-remove",
{target:"col"},b._widgetRemove);d("body").on("click",b._builderContentId+" .weluka-col-setting",{target:"col"},b._widgetSetting);d("body").on("click",b._builderContentId+" .weluka-row-remove",{target:"row"},b._widgetRemove);d("body").on("click",b._builderContentId+" .weluka-row-overlay .weluka-overlay-title",{target:"row"},b._widgetDefaultAction);d("body").on("dblclick",b._builderContentId+" .weluka-row-overlay",{target:"row"},b._widgetDefaultAction);d("body").on("click",b._builderContentId+" .weluka-row-setting",
{target:"row"},b._widgetSetting);d("body").on("click",b._builderContentId+" .weluka-section-remove",{target:"section"},b._widgetRemove);d("body").on("click",b._builderContentId+" .weluka-section-overlay .weluka-overlay-title",{target:"section"},b._widgetDefaultAction);d("body").on("dblclick",b._builderContentId+" .weluka-section-overlay",{target:"section"},b._widgetDefaultAction);d("body").on("click",b._builderContentId+" .weluka-section-setting",{target:"section"},b._widgetSetting);d("body").on("click",
b._builderContentId+" .weluka-s_widget-overlay .weluka-overlay-title",{target:"s_widget"},b._widgetDefaultAction);d("body").on("dblclick",b._builderContentId+" .weluka-s_widget-overlay",{target:"s_widget"},b._widgetDefaultAction);d("body").on("click",b._builderContentId+" .weluka-s_widget-remove",{target:"s_widget"},b._widgetRemove);d("body").on("click",b._builderContentId+" .weluka-s_widget-setting",{target:"s_widget"},b._widgetSetting);d("body").on("click",b._builderContentId+" .weluka-s_col-overlay .weluka-overlay-title",
{target:"s_col"},b._widgetDefaultAction);d("body").on("dblclick",b._builderContentId+" .weluka-s_col-overlay",{target:"s_col"},b._widgetDefaultAction);d("body").on("click",b._builderContentId+" .weluka-s_col-remove",{target:"s_col"},b._widgetRemove);d("body").on("click",b._builderContentId+" .weluka-s_col-setting",{target:"s_col"},b._widgetSetting);d("body").on("click",b._builderContentId+" .weluka-s_row-remove",{target:"s_row"},b._widgetRemove);d("body").on("click",b._builderContentId+" .weluka-s_row-overlay .weluka-overlay-title",
{target:"s_row"},b._widgetDefaultAction);d("body").on("dblclick",b._builderContentId+" .weluka-s_row-overlay",{target:"s_row"},b._widgetDefaultAction);d("body").on("click",b._builderContentId+" .weluka-s_row-setting",{target:"s_row"},b._widgetSetting);d(b._builderSnippetId).on("click",".single-media-btn",b._singleMedia);d(b._builderSnippetId).on("click",".multiple-media-btn",b._multipleMedia);d(b._builderSnippetId).on("click",".weluka-wplink-button",b._wpLinkOpen);d(b._builderSnippetId).on("click",
"#weluka-save-img-setting",b._widgetImgSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-text-setting",b._widgetTextSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-button-setting",b._widgetButtonSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-appalert-setting",b._widgetAppAlertSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-appembed-setting",b._widgetAppembedSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-wpmenu-setting",b._widgetWpMenuSettingSaved);
d(b._builderSnippetId).on("click","#weluka-save-wparchives-setting",b._widgetWpArchivesSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-wpcalendar-setting",b._widgetWpCalendarSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-wpcategories-setting",b._widgetWpCategoriesSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-wpmeta-setting",b._widgetWpMetaSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-wppages-setting",b._widgetWpPagesSettingSaved);d(b._builderSnippetId).on("click",
"#weluka-save-wpcomments-setting",b._widgetWpCommentsSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-wpposts-setting",b._widgetWpPostsSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-wprss-setting",b._widgetWpRssSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-wpsearch-setting",b._widgetWpSearchSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-wptags-setting",b._widgetWpTagsSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-page-setting",
b._pageSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-apphorline-setting",b._widgetApphorlineSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-col-setting",b._columSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-row-setting",b._rowSettingSaved);d(b._builderSnippetId).on("click","#weluka-save-section-setting",b._sectionSettingSaved);d(b._builderSnippetId).on("click",".single-media-remove",b._singleMediaRemoved);d(b._builderSnippetId).on("change","#welukaImageSettingLinkAction, #welukaButtonSettingLinkAction, #welukaIconSettingLinkAction",
b._settingLinkActionChanged);d(b._builderSnippetId).on("change","#welukaImageSettingExternUrl",b._imgSettingExternUrlChanged);d(b._builderSnippetId).on("change","#welukaImageSettingSourceType, #welukaAudioSettingSourceType",b._imgSettingSourceTypeChanged);d(b._builderSnippetId).on("change","#welukaButtonSettingText, #welukaButtonSettingAlign, #welukaButtonSettingColor, #welukaButtonSettingShape, #welukaButtonSettingSize, #welukaButtonSettingBlock",b._buttonSettingPreviewChanged);d(b._builderSnippetId).on("click",
".weluka-widget-nav-click",b._widgetNavClickAction);d(b._builderSnippetId).on("blur","#welukaTextSettingBlockColor, #welukaTextSettingShadowStyle, #welukaTextSettingShadowColor",b._textSettingShadowPreviewChanged);d("body").on("mousedown",".weluka-draggable",b._blockMoveInit);d("body").on("mouseup",b._blockDragCancel);d("body").on("dragstart",".weluka-draggable",b._dragStart);d("body").on("dragend",".weluka-draggable",b._dragEnd);d("body").on("click",".weluka-draggable",b._dragClicked);d("body").on("dragover",
".weluka-droppable",b._dragOver);d("body").on("drop",".weluka-droppable",b._drop);d("body").on("dragleave",".weluka-droppable",b._dragLeave);d(".weluka-droppable").on("dragenter",b._dragEnter);d(".weluka-modal").on("click",".weluka-modal-nav-tab a",b._settingsTabClicked);d(parent.document).on("click","#wp-link-submit",b._wpLinkSubmit);d(parent.document).on("click","#wp-link-cancel",b._wpLinkCancel);d(".modal-dialog").draggable({handle:".modal-header"})},_setOverlayEvents:function(){d(b._builderContentId).on("click",
".weluka-widget",b._blockClicked);d(".weluka-tip").tipTip()},_removeOverlayEvents:function(){d(b._builderContentId).off("click",".weluka-widget",b._blockClicked);d("#tiptip_holder").stop().remove()},_negativeMarginClear:function(){var a;d(".weluka-row-negative-margin-clear-builder").each(function(){d(this).removeClass("weluka-row-negative-margin-clear-builder")});d(".weluka-col-negative-margin-clear-builder").each(function(){(a=d(this).closest(".weluka-row"))&&a.addClass("weluka-row-negative-margin-clear-builder")})},
_setSortable:function(){d(b._builderSnippetId+" .weluka-gallery-list-container").sortable({items:"div.weluka-slide-thumb",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"weluka-sortable-placeholder",start:function(a,b){b.item.css("background-color","#f6f6f6")},stop:function(a,b){b.item.css("background-color","");b.item.css("cursor","")},update:function(a,e){var f="",g="";d(b._builderSnippetId+" .weluka-gallery-list-container div.weluka-slide-thumb").each(function(){g=
d(this).data("thumbid");f=""==f?g:f+","+g});d(b._builderSnippetId+" .weluka-gallery-list-container .sortable-ids").val(f)}});var a=d(b._builderSnippetId+" #welukaAppAccordionSettingPanelList");a.sortable({items:"div.weluka-appaccordion-panel-title-wrapper",cursor:"move",opacity:.65,cancel:"",start:function(a,b){b.item.css("background-color","#f6f6f6")},stop:function(a,b){b.item.css("background-color","");b.item.css("cursor","")}});a=d(b._builderSnippetId+" #welukaAppTabsSettingPanelList");a.sortable({items:"div.weluka-appaccordion-panel-title-wrapper",
cursor:"move",opacity:.65,cancel:"",start:function(a,b){b.item.css("background-color","#f6f6f6")},stop:function(a,b){b.item.css("background-color","");b.item.css("cursor","")}});a=d(b._builderSnippetId+" #welukaAppAppListSettingTitleList");a.sortable({items:"div.weluka-appaccordion-panel-title-wrapper",cursor:"move",opacity:.65,cancel:"",start:function(a,b){b.item.css("background-color","#f6f6f6")},stop:function(a,b){b.item.css("background-color","");b.item.css("cursor","")}})},_initColorPicker:function(a,
c){var b='<input type="text" id="'+c+'" name="'+c+'" class="form-control" value="" />';d("#"+c).remove();d("#"+a).append(b)},_setWidgetNavPopover:function(){d(".weluka-widget-nav-poptrigger").popover({html:!0,content:function(){return d(this).next(".weluka-widget-nav-popover").html()},trigger:"click",container:"body",placement:"right"});d("body").on("click",function(a){d(".weluka-widget-nav-poptrigger").each(function(){d(this).is(a.target)||0!==d(this).has(a.target).length||0!==d(".weluka-widget-nav-popover").has(a.target).length||
d(this).popover("hide")})})},_popOverHide:function(){d(".weluka-widget-nav-poptrigger").each(function(){d(this).popover("hide")})},_widgetNavToggle:function(){var a=d("#weluka-builder-widget-toggle-switch").data("target");d(a).slideToggle();d("#weluka-builder-widget-toggle-switch").toggleClass("active")},_linkClicked:function(a){d(a.target).hasClass("weluka-a")||a.preventDefault()},_blockClicked:function(a){d(this);var c=null,e="";d(b._builderContentId+" .weluka-overlay").each(function(){c=d(this);
180>c.outerWidth()&&c.addClass("weluka-ovarlay-actions-mini")});d(b._builderContentId+" .weluka-section-block").each(function(){c=d(this);c.addClass("weluka-overlay-active");e=c.attr("style")?c.attr("style")+";":"";e+="padding-top:22px !important;";c.attr("style",e)});d(b._builderContentId+" .weluka-row-block").each(function(){c=d(this);c.addClass("weluka-overlay-active");e=c.attr("style")?c.attr("style")+";":"";e+="padding-top:22px !important;";c.attr("style",e)});d(b._builderContentId+" .weluka-col-block").each(function(){c=
d(this);c.addClass("weluka-overlay-active");e=c.attr("style")?c.attr("style")+";":"";e+="padding-top:22px !important;";c.attr("style",e)});d(b._builderContentId+" .weluka-widget").each(function(){c=d(this);c.addClass("weluka-overlay-active");e=c.attr("style")?c.attr("style")+";":"";e+="padding-top:22px !important;";c.attr("style",e)});d(b._builderContentId+" .weluka-s-row-block").each(function(){c=d(this);c.addClass("weluka-overlay-active");e=c.attr("style")?c.attr("style")+";":"";e+="padding-top:22px !important;";
c.attr("style",e)});d(b._builderContentId+" .weluka-s-col-block").each(function(){c=d(this);c.addClass("weluka-overlay-active");e=c.attr("style")?c.attr("style")+";":"";e+="padding-top:22px !important;";c.attr("style",e)});d(b._builderContentId+" .weluka-s-widget").each(function(){c=d(this);c.addClass("weluka-overlay-active");e=c.attr("style")?c.attr("style")+";":"";e+="padding-top:22px !important;";c.attr("style",e)});d(".weluka-builder-edit-wrapper").css("padding-top","20px");d(".weluka-builder-edit-wrapper").css("padding-bottom",
"20px")},_blockEditDeactive:function(){var a="";d(b._builderContentId+" .weluka-overlay-active").each(function(){d(this).removeClass("weluka-overlay-active")});d(b._builderContentId+" .weluka-s-widget").each(function(){d(this).css("padding-top","")});d(b._builderContentId+" .weluka-s-col-block").each(function(){a=d(this).data("orgpdt");d(this).css("padding-top",a);d(this).siblings(".weluka-col-block").css("padding-top",a)});d(b._builderContentId+" .weluka-s-row-block").each(function(){d(this).css("padding-top",
"")});d(b._builderContentId+" .weluka-widget").each(function(){d(this).css("padding-top","")});d(b._builderContentId+" .weluka-col-block").each(function(){a=d(this).data("orgpdt");d(this).css("padding-top",a);d(this).siblings(".weluka-col-block").css("padding-top",a)});d(b._builderContentId+" .weluka-row-block").each(function(){d(this).css("padding-top","")});d(b._builderContentId+" .weluka-section-block").each(function(){d(this).css("padding-top","")});d(".weluka-builder-edit-wrapper").css("padding-top",
"");d(".weluka-builder-edit-wrapper").css("padding-bottom","");b._negativeMarginClear()},_widgetDefaultAction:function(a){var c=d(this),e=a.data.target;b._setCurrentEditInfo(c);"section"==e?b._sectionSetting(a):"col"==e||"s_col"==e?b._columSetting(a):"row"==e||"s_row"==e?b._rowSetting(a):(c=c.closest("s_widget"==e?".weluka-s-widget":".weluka-widget").data("widgetType"),c==welukaBuilderWp.widget_types.IMG?b._widgetImgSetting(a):c==welukaBuilderWp.widget_types.BUTTON?b._widgetButtonSetting(a):c==welukaBuilderWp.widget_types.MOVIE?
b._widgetMovieSetting(a):c!=welukaBuilderWp.widget_types.AUDIO&&c!=welukaBuilderWp.widget_types.GMAP&&c!=welukaBuilderWp.widget_types.ICON&&c!=welukaBuilderWp.widget_types.SLIDE&&c!=welukaBuilderWp.widget_types.SNS_BUTTON&&c!=welukaBuilderWp.widget_types.SNS_SHARE&&(c==welukaBuilderWp.widget_types.APPHORLINE?b._widgetApphorlineSetting(a):c==welukaBuilderWp.widget_types.APPEMBED?b._widgetAppembedSetting(a):c!=welukaBuilderWp.widget_types.APPACCORDION&&c!=welukaBuilderWp.widget_types.APPTABS&&c!=welukaBuilderWp.widget_types.APPLIST&&
(c==welukaBuilderWp.widget_types.WPMENU?b._widgetWpMenuSetting(a):c==welukaBuilderWp.widget_types.WPARCHIVES?b._widgetWpArchivesSetting(a):c==welukaBuilderWp.widget_types.WPCALENDAR?b._widgetWpCalendarSetting(a):c==welukaBuilderWp.widget_types.WPCATEGORIES?b._widgetWpCategoriesSetting(a):c==welukaBuilderWp.widget_types.WPMETA?b._widgetWpMetaSetting(a):c==welukaBuilderWp.widget_types.WPPAGES?b._widgetWpPagesSetting(a):c==welukaBuilderWp.widget_types.WPCOMMENTS?b._widgetWpCommentsSetting(a):c==welukaBuilderWp.widget_types.WPPOSTS?
b._widgetWpPostsSetting(a):c==welukaBuilderWp.widget_types.WPRSS?b._widgetWpRssSetting(a):c==welukaBuilderWp.widget_types.WPSEARCH?b._widgetWpSearchSetting(a):c==welukaBuilderWp.widget_types.WPTAGCLOUD?b._widgetWpTagsSetting(a):b._widgetCodeEditor(a))));a.stopPropagation()},_widgetSetting:function(a){var c=d(this),e=a.data.target;b._setCurrentEditInfo(c);b._currentEditTargetName=e;"section"==e?b._sectionSetting(a):"col"==e||"s_col"==e?b._columSetting(a):"row"==e||"s_row"==e?b._rowSetting(a):(c=c.closest("s_widget"==
e?".weluka-s-widget":".weluka-widget").data("widgetType"),c==welukaBuilderWp.widget_types.IMG?b._widgetImgSetting(a):c==welukaBuilderWp.widget_types.BUTTON?b._widgetButtonSetting(a):c==welukaBuilderWp.widget_types.MOVIE?b._widgetMovieSetting(a):c!=welukaBuilderWp.widget_types.AUDIO&&(c==welukaBuilderWp.widget_types.APPHORLINE?b._widgetApphorlineSetting(a):c==welukaBuilderWp.widget_types.APPALERT?b._widgetAppAlertSetting(a):c!=welukaBuilderWp.widget_types.GMAP&&c!=welukaBuilderWp.widget_types.ICON&&
c!=welukaBuilderWp.widget_types.SLIDE&&c!=welukaBuilderWp.widget_types.SNS_BUTTON&&c!=welukaBuilderWp.widget_types.SNS_SHARE&&(c==welukaBuilderWp.widget_types.APPEMBED?b._widgetAppembedSetting(a):c!=welukaBuilderWp.widget_types.APPACCORDION&&c!=welukaBuilderWp.widget_types.APPTABS&&c!=welukaBuilderWp.widget_types.APPLIST&&(c==welukaBuilderWp.widget_types.WPMENU?b._widgetWpMenuSetting(a):c==welukaBuilderWp.widget_types.WPARCHIVES?b._widgetWpArchivesSetting(a):c==welukaBuilderWp.widget_types.WPCALENDAR?
b._widgetWpCalendarSetting(a):c==welukaBuilderWp.widget_types.WPCATEGORIES?b._widgetWpCategoriesSetting(a):c==welukaBuilderWp.widget_types.WPMETA?b._widgetWpMetaSetting(a):c==welukaBuilderWp.widget_types.WPPAGES?b._widgetWpPagesSetting(a):c==welukaBuilderWp.widget_types.WPCOMMENTS?b._widgetWpCommentsSetting(a):c==welukaBuilderWp.widget_types.WPPOSTS?b._widgetWpPostsSetting(a):c==welukaBuilderWp.widget_types.WPRSS?b._widgetWpRssSetting(a):c==welukaBuilderWp.widget_types.WPSEARCH?b._widgetWpSearchSetting(a):
c==welukaBuilderWp.widget_types.WPTAGCLOUD?b._widgetWpTagsSetting(a):b._widgetTextSetting(a)))));a.stopPropagation()},_widgetNavClickAction:function(a){d(this).data("type")==welukaBuilderWp.widget_types.PAGESETTING&&b._pageSetting(a);a.stopPropagation()},_settingsTabClicked:function(a){var c=d(this),b=c.closest(".wleuka-modal-main"),c=c.attr("href").split("#").pop();b.find(".weluka-builder-settings-panel").removeClass("weluka-panel-active");b.find("#"+c).addClass("weluka-panel-active");b.find(".weluka-modal-nav-tab a").removeClass("active");
d(this).addClass("active");a.preventDefault()},_setCurrentEditInfo:function(a){var c=a.closest(".weluka-s-widget").attr("id")?a.closest(".weluka-s-widget").attr("id"):"",d=a.closest(".weluka-s-col-block").attr("id")?a.closest(".weluka-s-col-block").attr("id"):"",f=a.closest(".weluka-s-row-block").attr("id")?a.closest(".weluka-s-row-block").attr("id"):"",g=a.closest(".weluka-widget").attr("id")?a.closest(".weluka-widget").attr("id"):"",h=a.closest(".weluka-col-block").attr("id")?a.closest(".weluka-col-block").attr("id"):
"",k=a.closest(".weluka-row-block").attr("id")?a.closest(".weluka-row-block").attr("id"):"";a=a.closest(".weluka-section-block").attr("id")?a.closest(".weluka-section-block").attr("id"):"";b._currentWidgetEditInfo.s_widgetId=c;b._currentWidgetEditInfo.s_colId=d;b._currentWidgetEditInfo.s_rowId=f;b._currentWidgetEditInfo.widgetId=g;b._currentWidgetEditInfo.colId=h;b._currentWidgetEditInfo.rowId=k;b._currentWidgetEditInfo.sectionId=a},_widgetCodeEditor:function(a){a=a.data.target;var c=b._getModelContent(a),
d=null;b._currentEditTargetName=a;(d="s_widget"==a?c.s_widgetData:c.widgetData)&&window.parent.welukaAdmin.tinymceModalOpen(d.text)},_tinymceSaved:function(a){var c=b._getModelContent(b._currentEditTargetName),c="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;c.text&&(c.text=a,a=d("#"+c.id),c=b._getHtml(c,c.type,b._currentEditTargetName),c.html&&a.replaceWith(c.html));b._blockEditDeactive()},_widgetTextSetting:function(a){b._currentEditTargetName=a.data.target;a=d("#weluka-text-setting-modal");
var c=b._getModelContent(b._currentEditTargetName),c="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;a.removeClass("hide");a.modal("show");a=c.shadow_style?c.shadow_style:"";d("#welukaTextSettingShadowStyle").val(a).trigger("blur");a=c.shadow_color?c.shadow_color:"";b._initColorPicker("welukaTextSettingShadowColorWrap","welukaTextSettingShadowColor");d("#welukaTextSettingShadowColor").val(a).trigger("blur");d("#welukaTextSettingShadowColor").colorpicker();b._setStyleSettingFormVal(c,
"#weluka-text-setting-form","Text");b._setMarginSettingFormVal(c,"#weluka-text-setting-form","Text");a=c.cssClass?c.cssClass:"";d("#welukaTextSettingCssClass").val(a)},_textSettingShadowPreviewChanged:function(a){var c=d("#welukaTextSettingShadowStyle").val()?d("#welukaTextSettingShadowStyle").val():"";a=d("#welukaTextSettingShadowColor").val()?d("#welukaTextSettingShadowColor").val():"";var b=d("#welukaTextSettingBlockColor").val()?d("#welukaTextSettingBlockColor").val():"",f="";d("#welukaTextSettingShadowPreview").css("");
c&&(c=welukaBuilderWp.text_shadow_styles[c],f=c.offset_v+" "+c.offset_h+" "+c.grad,f=a?f+" "+a:f+" "+c.default_color,d("#welukaTextSettingShadowPreview").css("text-shadow",f),b&&d("#welukaTextSettingShadowPreview").css("color",b))},_widgetImgSetting:function(a,c){a=a||{};c=c||null;var e=a.data?a.data.target?a.data.target:null:null;c||(b._currentEditTargetName=e);var f=d("#weluka-img-setting-modal"),e=c?null:b._getModelContent(b._currentEditTargetName),e=c?c:"s_widget"==b._currentEditTargetName?e.s_widgetData:
e.widgetData;f.removeClass("hide");f.modal("show");f=e.source_type?e.source_type:"media";d("#welukaImageSettingSourceType").val(f).trigger("change");f=e.external?e.external:"";d("#welukaImageSettingExternUrl").val(f).trigger("change");var f=null,g="",f=d("#weluka-image-setting-media-input-content"),g=e.attachment_id&&""!=e.attachment_id?b._setWidgetSingleMediaInfo(e,!1):b._imgSettingMediaSelectButton(!1,welukaBuilderWp.widget_types.IMG,b._currentEditTargetName,"#welukaImageSettingMedia_attachment_id");
f.html(g);(f=e.fitwidth?e.fitwidth:"")&&""!=f?d("#weluka-image-setting-form #welukaImageSettingFit").prop({checked:"checked"}):d("#weluka-image-setting-form #welukaImageSettingFit").prop({checked:!1});f=e.class_name?e.class_name.split(" "):[];g="weluka-text-center";-1!=d.inArray("weluka-text-left",f)&&(g="weluka-text-left");-1!=d.inArray("weluka-text-right",f)&&(g="weluka-text-right");d("#welukaImageSettingAlign").val(g);f=e.shape?e.shape:"";d("#welukaImageSettingShape").val(f);var f=e.link?e.link:
{},g=f.action?f.action:"",h={};h.href="gotolink"!=g||f.href?f.href:"";h.target="gotolink"!=g||f.target?f.target:"";b._setImgSettingLink(h);d("#welukaImageSettingLinkAction").val(g).trigger("change");b._setStyleSettingFormVal(e,"#weluka-image-setting-form","Image");b._setMarginSettingFormVal(e,"#weluka-image-setting-form","Image");f=e.cssClass?e.cssClass:"";d("#welukaImageSettingCssClass").val(f);e=e.invoker?e.invoker:"";d("#welukaImageSettingInvoker").val(e)},_setImgSettingLink:function(a){"undefined"!==
typeof a&&a&&(a.href&&d("#weluka-image-setting-form #welukaImageSettingLinkUrl").val(a.href),a.target&&""!=a.target?d("#weluka-image-setting-form #welukaImageSettingLinkTarget").prop({checked:"checked"}):d("#weluka-image-setting-form #welukaImageSettingLinkTarget").prop({checked:!1}))},_imgSettingSourceTypeChanged:function(a){a="welukaAudioSettingSourceType"==d(a.target).attr("id")?"audio":"image";d("#weluka-"+a+"-setting-form .weluka-settings-media-input-panel").removeClass("weluka-panel-active");
"extern"==d(this).val()?d("#weluka-"+a+"-setting-extern-input-area").addClass("weluka-panel-active"):d("#weluka-"+a+"-setting-media-input-area").addClass("weluka-panel-active")},_imgSettingExternUrlChanged:function(a){a=d("#weluka-image-setting-media-extern-content .img-thumb-wrap");var c=d(this).val();a.css("background-image","");a.css("background-size","");""!=c&&(a.css("background-image","url("+c+")"),a.css("background-size","cover"))},_settingLinkActionChanged:function(a){var c=d(this).val();
a=d(a.target).data("panelTarget")+" .welukaSettingLinkInputArea";d(a).removeClass("weluka-panel-active");"gotolink"==c&&d(a).addClass("weluka-panel-active")},_widgetButtonSetting:function(a){b._currentEditTargetName=a.data.target;var c=d("#weluka-button-setting-modal");a=b._getModelContent(b._currentEditTargetName);a="s_widget"==b._currentEditTargetName?a.s_widgetData:a.widgetData;c.removeClass("hide");c.modal("show");c=a.text?a.text:"BUTTON";d("#welukaButtonSettingText").val(c).trigger("change");
var c=a.class_name?a.class_name.split(" "):[],e="weluka-text-center";-1!=d.inArray("weluka-text-left",c)&&(e="weluka-text-left");-1!=d.inArray("weluka-text-right",c)&&(e="weluka-text-right");d("#welukaButtonSettingAlign").val(e).trigger("change");var c=a.link?a.link:{},e=c.action?c.action:"",f={};f.href="gotolink"!=e||c.href?c.href:"";f.target="gotolink"!=e||c.target?c.target:"";b._setButtonSettingLink(f);d("#welukaButtonSettingLinkAction").val(e).trigger("change");c=a.button_color?a.button_color:
"weluka-btn-default";d("#welukaButtonSettingColor").val(c).trigger("change");c=a.shape?a.shape:"";d("#welukaButtonSettingShape").val(c).trigger("change");c=a.size?a.size:"";d("#welukaButtonSettingSize").val(c).trigger("change");"on"==(a.block?a.block:"")?d("#welukaButtonSettingBlock").prop({checked:"checked"}).trigger("change"):d("#welukaButtonSettingBlock").prop({checked:!1}).trigger("change");b._setMarginSettingFormVal(a,"#weluka-button-setting-form","Button");a=a.cssClass?a.cssClass:"";d("#welukaButtonSettingCssClass").val(a)},
_buttonSettingPreviewChanged:function(a){a=d("#welukaButtonSettingText").val()?d("#welukaButtonSettingText").val():"BUTTON";var c=d("#welukaButtonSettingAlign").val()?" "+d("#welukaButtonSettingAlign").val():" weluka-text-center",b=d("#welukaButtonSettingColor").val()?" "+d("#welukaButtonSettingColor").val():" weluka-btn-default",f=d("#welukaButtonSettingShape").val()?" "+d("#welukaButtonSettingShape").val():"",g=d("#welukaButtonSettingSize").val()?" "+d("#welukaButtonSettingSize").val():"",h=d("#welukaButtonSettingBlock").prop("checked")?
" btn-block":"",k=d("#welukaButtonSettingPreview");""!=c&&k.removeClass().addClass(c);k.html('<a href="#" class="weluka-btn'+b+g+h+f+'">'+a+"</a>")},_setButtonSettingLink:function(a){"undefined"!==typeof a&&a&&(a.href&&d("#weluka-button-setting-form #welukaButtonSettingLinkUrl").val(a.href),a.target&&""!=a.target?d("#weluka-button-setting-form #welukaButtonSettingLinkTarget").prop({checked:"checked"}):d("#weluka-button-setting-form #welukaButtonSettingLinkTarget").prop({checked:!1}))},_widgetAppAlertSetting:function(a){b._currentEditTargetName=
a.data.target;var c=d("#weluka-appalert-setting-modal");a=b._getModelContent(b._currentEditTargetName);a="s_widget"==b._currentEditTargetName?a.s_widgetData:a.widgetData;c.removeClass("hide");c.modal("show");c=a.alert_class?a.alert_class:"alert-info";d("#welukaAppAlertSettingType").val(c);c=a.shape?a.shape:"";d("#welukaAppAlertSettingShape").val(c);""!=(a.close_button?a.close_button:"")?d("#weluka-appalert-setting-form #welukaAppAlertSettingCloseBtn").prop({checked:"checked"}):d("#weluka-appalert-setting-form#welukaAppAlertSettingCloseBtn").prop({checked:!1});
b._setMarginSettingFormVal(a,"#weluka-appalert-setting-form","AppAlert");a=a.cssClass?a.cssClass:"";d("#welukaAppAlertSettingCssClass").val(a)},_setSettingTinymceContent:function(a,c){"undefined"!==typeof tinyMCE?d("#wp-"+c+"-wrap").hasClass("tmce-active")?(tinyMCE.get(c).focus(),tinyMCE.activeEditor.setContent(a)):(d("#"+c).focus(),d("#"+c).val(a)):alert("tinymce undefined")},_widgetAppembedSetting:function(a){b._currentEditTargetName=a.data.target;a=d("#weluka-appembed-setting-modal");var c=b._getModelContent(b._currentEditTargetName),
c="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;a.removeClass("hide");a.modal("show");a=c.code?c.code:"";d("#welukaAppembedSettingCode").val(a);b._setStyleSettingFormVal(c,"#weluka-appembed-setting-form","Appembed");b._setMarginSettingFormVal(c,"#weluka-appembed-setting-form","Appembed");a=c.cssClass?c.cssClass:"";d("#welukaGmapSettingCssClass").val(a)},_setWysiwigButton:function(a,c){var b=d(a),f="";b.find(".fa").removeClass("weluka-wysiwyg-btn-active");for(f in c)c[f]&&0!=c[f]&&
b.find(".fa-"+f).addClass("weluka-wysiwyg-btn-active")},_getWysiwigValue:function(a){var c=[],b="",f;d(a).find(".fa").each(function(){f=0;b=d(this).data("type");d(this).hasClass("weluka-wysiwyg-btn-active")&&(f=1);c[b]=f});return c},_widgetWpMenuSetting:function(a){b._currentEditTargetName=a.data.target;var c=d("#weluka-wpmenu-setting-modal");a=b._getModelContent(b._currentEditTargetName);a="s_widget"==b._currentEditTargetName?a.s_widgetData:a.widgetData;c.removeClass("hide");c.modal("show");c=a.title?
a.title:"";d("#welukaWpMenuSettingTitle").val(c);c=a.term_id?a.term_id:"";d("#welukaWpMenuSettingMenu").val(c);b._setMarginSettingFormVal(a,"#weluka-wpmenu-setting-form","WpMenu");a=a.cssClass?a.cssClass:"";d("#welukaWpMenuSettingCssClass").val(a)},_widgetWpMenuSettingSaved:function(a){a=d("#weluka-wpmenu-setting-modal");var c=b._getModelContent(b._currentEditTargetName),c="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData,e=d("#weluka-wpmenu-setting-form #welukaWpMenuSettingMenu").val()?
d("#weluka-wpmenu-setting-form #welukaWpMenuSettingMenu").val():"",f="";""==e&&(f=welukaBuilderWp.msgs.invalid_menu);""!=f?alert(f):(c&&(c.title=d("#welukaWpMenuSettingTitle").val(),c.term_id=e,b._setMarginSettingVal(c,"#weluka-wpmenu-setting-form","WpMenu"),b._setCssSettingVal(c,"#weluka-wpmenu-setting-form","WpMenu"),e=d("#"+c.id),c=b._getHtml(c,c.type,b._currentEditTargetName),c.html&&e.replaceWith(c.html)),b._blockEditDeactive(),a.modal("hide"))},_widgetWpArchivesSetting:function(a){b._currentEditTargetName=
a.data.target;var c=d("#weluka-wparchives-setting-modal");a=b._getModelContent(b._currentEditTargetName);a="s_widget"==b._currentEditTargetName?a.s_widgetData:a.widgetData;c.removeClass("hide");c.modal("show");c=a.title?a.title:"";d("#welukaWpArchivesSettingTitle").val(c);c=a.show_type?a.show_type:"monthly";d("#welukaWpArchivesSettingShowType").val(c);c=a.show_limit?a.show_limit:"";d("#welukaWpArchivesSettingShowLimit").val(c);""!=(a.show_format?a.show_format:"")?d("#welukaWpArchivesSettingShowFormat").prop({checked:"checked"}):
d("#welukaWpArchivesSettingShowFormat").prop({checked:!1});""!=(a.show_post_count?a.show_post_count:"")?d("#welukaWpArchivesSettingShowCount").prop({checked:"checked"}):d("#welukaWpArchivesSettingShowCount").prop({checked:!1});b._setMarginSettingFormVal(a,"#weluka-wparchives-setting-form","WpArchives");a=a.cssClass?a.cssClass:"";d("#welukaWpArchivesSettingCssClass").val(a)},_widgetWpArchivesSettingSaved:function(a){a=d("#weluka-wparchives-setting-modal");var c=b._getModelContent(b._currentEditTargetName),
e="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;e&&(e.title=d("#welukaWpArchivesSettingTitle").val(),e.show_type=d("#welukaWpArchivesSettingShowType").val(),e.show_limit=d("#welukaWpArchivesSettingShowLimit").val(),e.show_format=d("#welukaWpArchivesSettingShowFormat").prop("checked")?d("#welukaWpArchivesSettingShowFormat").val():"",e.show_post_count=d("#welukaWpArchivesSettingShowCount").prop("checked")?"on":"",b._setMarginSettingVal(e,"#weluka-wparchives-setting-form","WpArchives"),
b._setCssSettingVal(e,"#weluka-wparchives-setting-form","WpArchives"),c=d("#"+e.id),e=b._getHtml(e,e.type,b._currentEditTargetName),e.html&&c.replaceWith(e.html));b._blockEditDeactive();a.modal("hide")},_widgetWpCalendarSetting:function(a){b._currentEditTargetName=a.data.target;a=d("#weluka-wpcalendar-setting-modal");var c=b._getModelContent(b._currentEditTargetName),c="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;a.removeClass("hide");a.modal("show");a=c.title?c.title:"";d("#welukaWpCalendarSettingTitle").val(a);
b._setMarginSettingFormVal(c,"#weluka-wpcalendar-setting-form","WpCalendar");a=c.cssClass?c.cssClass:"";d("#welukaWpCalendarSettingCssClass").val(a)},_widgetWpCalendarSettingSaved:function(a){a=d("#weluka-wpcalendar-setting-modal");var c=b._getModelContent(b._currentEditTargetName),e="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;e&&(e.title=d("#welukaWpCalendarSettingTitle").val(),b._setMarginSettingVal(e,"#weluka-wpcalendar-setting-form","WpCalendar"),b._setCssSettingVal(e,"#weluka-wpcalendar-setting-form",
"WpCalendar"),c=d("#"+e.id),e=b._getHtml(e,e.type,b._currentEditTargetName),e.html&&c.replaceWith(e.html));b._blockEditDeactive();a.modal("hide")},_widgetWpCategoriesSetting:function(a){b._currentEditTargetName=a.data.target;a=d("#weluka-wpcategories-setting-modal");var c=b._getModelContent(b._currentEditTargetName),c="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;a.removeClass("hide");a.modal("show");a=c.title?c.title:"";d("#welukaWpCategoriesSettingTitle").val(a);""!=(c.show_dropdown?
c.show_dropdown:"")?d("#welukaWpCategoriesSettingShowDropdown").prop({checked:"checked"}):d("#welukaWpCategoriesSettingShowDropdown").prop({checked:!1});""!=(c.show_post_count?c.show_post_count:"")?d("#welukaWpCategoriesSettingShowCount").prop({checked:"checked"}):d("#welukaWpCategoriesSettingShowCount").prop({checked:!1});""!=(c.hierarchical?c.hierarchical:"")?d("#welukaWpCategoriesSettingHierarchical").prop({checked:"checked"}):d("#welukaWpCategoriesSettingHierarchical").prop({checked:!1});b._setMarginSettingFormVal(c,
"#weluka-wpcategories-setting-form","WpCategories");a=c.cssClass?c.cssClass:"";d("#welukaWpCategoriesSettingCssClass").val(a)},_widgetWpCategoriesSettingSaved:function(a){a=d("#weluka-wpcategories-setting-modal");var c=b._getModelContent(b._currentEditTargetName),e="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;e&&(e.title=d("#welukaWpCategoriesSettingTitle").val(),e.show_dropdown=d("#welukaWpCategoriesSettingShowDropdown").prop("checked")?"on":"",e.show_post_count=d("#welukaWpCategoriesSettingShowCount").prop("checked")?
"on":"",e.hierarchical=d("#welukaWpCategoriesSettingHierarchical").prop("checked")?"on":"",b._setMarginSettingVal(e,"#weluka-wpcategories-setting-form","WpCategories"),b._setCssSettingVal(e,"#weluka-wpcategories-setting-form","WpCategories"),c=d("#"+e.id),e=b._getHtml(e,e.type,b._currentEditTargetName),e.html&&c.replaceWith(e.html));b._blockEditDeactive();a.modal("hide")},_widgetWpMetaSetting:function(a){b._currentEditTargetName=a.data.target;a=d("#weluka-wpmeta-setting-modal");var c=b._getModelContent(b._currentEditTargetName),
c="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;a.removeClass("hide");a.modal("show");a=c.title?c.title:"";d("#welukaWpMetaSettingTitle").val(a);b._setMarginSettingFormVal(c,"#weluka-wpmeta-setting-form","WpMeta");a=c.cssClass?c.cssClass:"";d("#welukaWpMetaSettingCssClass").val(a)},_widgetWpMetaSettingSaved:function(a){a=d("#weluka-wpmeta-setting-modal");var c=b._getModelContent(b._currentEditTargetName),e="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;e&&(e.title=
d("#welukaWpMetaSettingTitle").val(),b._setMarginSettingVal(e,"#weluka-wpmeta-setting-form","WpMeta"),b._setCssSettingVal(e,"#weluka-wpmeta-setting-form","WpMeta"),c=d("#"+e.id),e=b._getHtml(e,e.type,b._currentEditTargetName),e.html&&c.replaceWith(e.html));b._blockEditDeactive();a.modal("hide")},_widgetWpPagesSetting:function(a){b._currentEditTargetName=a.data.target;var c=d("#weluka-wppages-setting-modal");a=b._getModelContent(b._currentEditTargetName);a="s_widget"==b._currentEditTargetName?a.s_widgetData:
a.widgetData;c.removeClass("hide");c.modal("show");c=a.title?a.title:"";d("#welukaWpPagesSettingTitle").val(c);c=a.sortby?a.sortby:"";d("#welukaWpPagesSettingSortby").val(c);c=a.excludes?a.excludes:"";d("#welukaWpPagesSettingExcludes").val(c);b._setMarginSettingFormVal(a,"#weluka-wppages-setting-form","WpPages");a=a.cssClass?a.cssClass:"";d("#welukaWpPagesSettingCssClass").val(a)},_widgetWpPagesSettingSaved:function(a){a=d("#weluka-wppages-setting-modal");var c=b._getModelContent(b._currentEditTargetName),
e="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;e&&(e.title=d("#welukaWpPagesSettingTitle").val(),e.sortby=d("#welukaWpPagesSettingSortby").val(),e.excludes=d("#welukaWpPagesSettingExcludes").val(),b._setMarginSettingVal(e,"#weluka-wppages-setting-form","WpPages"),b._setCssSettingVal(e,"#weluka-wppages-setting-form","WpPages"),c=d("#"+e.id),e=b._getHtml(e,e.type,b._currentEditTargetName),e.html&&c.replaceWith(e.html));b._blockEditDeactive();a.modal("hide")},_widgetWpCommentsSetting:function(a){b._currentEditTargetName=
a.data.target;var c=d("#weluka-wpcomments-setting-modal");a=b._getModelContent(b._currentEditTargetName);a="s_widget"==b._currentEditTargetName?a.s_widgetData:a.widgetData;c.removeClass("hide");c.modal("show");c=a.title?a.title:"";d("#welukaWpCommentsSettingTitle").val(c);c=a.comment_limit?a.comment_limit:"";d("#welukaWpCommentsSettingLimit").val(c);b._setMarginSettingFormVal(a,"#weluka-wpcomments-setting-form","WpComments");a=a.cssClass?a.cssClass:"";d("#welukaWpCommentsSettingCssClass").val(a)},
_widgetWpCommentsSettingSaved:function(a){a=d("#weluka-wpcomments-setting-modal");var c=b._getModelContent(b._currentEditTargetName),e="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;e&&(e.title=d("#welukaWpCommentsSettingTitle").val(),e.comment_limit=d("#welukaWpCommentsSettingLimit").val(),b._setMarginSettingVal(e,"#weluka-wpcomments-setting-form","WpComments"),b._setCssSettingVal(e,"#weluka-wpcomments-setting-form","WpComments"),c=d("#"+e.id),e=b._getHtml(e,e.type,b._currentEditTargetName),
e.html&&c.replaceWith(e.html));b._blockEditDeactive();a.modal("hide")},_widgetWpPostsSetting:function(a){b._currentEditTargetName=a.data.target;var c=d("#weluka-wpposts-setting-modal");a=b._getModelContent(b._currentEditTargetName);a="s_widget"==b._currentEditTargetName?a.s_widgetData:a.widgetData;c.removeClass("hide");c.modal("show");c=a.title?a.title:"";d("#welukaWpPostsSettingTitle").val(c);var e=a.categories?a.categories:"",c="";d(".welukaWpPostsSettingCat").prop({checked:!1});if(""!=e)for(var f=
e.split(","),e=0;e<f.length;e++)c="#welukaWpPostsSettingCat_"+f[e],d(c).prop({checked:"checked"});1==(a.flg_post_title?a.flg_post_title:"")?d("#welukaWpPostsSettingFlgTitle").prop({checked:"checked"}):d("#welukaWpPostsSettingFlgTitle").prop({checked:!1});1==(a.flg_post_date?a.flg_post_date:"")?d("#welukaWpPostsSettingFlgDate").prop({checked:"checked"}):d("#welukaWpPostsSettingFlgDate").prop({checked:!1});1==(a.flg_post_author?a.flg_post_author:"")?d("#welukaWpPostsSettingFlgAuthor").prop({checked:"checked"}):
d("#welukaWpPostsSettingFlgAuthor").prop({checked:!1});1==(a.flg_post_category?a.flg_post_category:"")?d("#welukaWpPostsSettingFlgCategory").prop({checked:"checked"}):d("#welukaWpPostsSettingFlgCategory").prop({checked:!1});1==(a.flg_post_excerpt?a.flg_post_excerpt:"")?d("#welukaWpPostsSettingFlgExcerpt").prop({checked:"checked"}):d("#welukaWpPostsSettingFlgExcerpt").prop({checked:!1});1==(a.flg_post_thumbnail?a.flg_post_thumbnail:"")?d("#welukaWpPostsSettingFlgThumb").prop({checked:"checked"}):d("#welukaWpPostsSettingFlgThumb").prop({checked:!1});
1==(a.flg_post_comment?a.flg_post_comment:"")?d("#welukaWpPostsSettingFlgComment").prop({checked:"checked"}):d("#welukaWpPostsSettingFlgComment").prop({checked:!1});1==(a.flg_post_tagcloud?a.flg_post_tagcloud:"")?d("#welukaWpPostsSettingFlgTagcloud").prop({checked:"checked"}):d("#welukaWpPostsSettingFlgTagcloud").prop({checked:!1});c=a.tagcloud_pos?a.tagcloud_pos:"";d("#welukaWpPostsSettingTagcloudPos").val(c);c=a.excerpt_string_num?a.excerpt_string_num:"110";d("#welukaWpPostsSettingExcerptStrNum").val(c);
c=a.more_string?a.more_string:"";d("#welukaWpPostsSettingMoreStr").val(c);c=a.more_string?a.more_string:"";d("#welukaWpPostsSettingMoreStr").val(c);c=a.all_post_url?a.all_post_url:"";d("#welukaWpPostsSettingAllLinkUrl").val(c);c=a.all_post_link_string?a.all_post_link_string:"";d("#welukaWpPostsSettingAllMoreStr").val(c);c=a.post_limit?a.post_limit:"";d("#welukaWpPostsSettingLimit").val(c);c=a.list_height?a.list_height:"";d("#welukaWpPostsSettingHeight").val(c);b._setMarginSettingFormVal(a,"#weluka-wpposts-setting-form",
"WpPosts");a=a.cssClass?a.cssClass:"";d("#welukaWpPostsSettingCssClass").val(a)},_widgetWpPostsSettingSaved:function(a){a=d("#weluka-wpposts-setting-modal");var c=b._getModelContent(b._currentEditTargetName),e="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;if(e){e.title=d("#welukaWpPostsSettingTitle").val();e.post_limit=d("#welukaWpPostsSettingLimit").val();e.flg_post_title=d("#welukaWpPostsSettingFlgTitle").prop("checked")?"1":"0";e.flg_post_date=d("#welukaWpPostsSettingFlgDate").prop("checked")?
"1":"0";e.flg_post_author=d("#welukaWpPostsSettingFlgAuthor").prop("checked")?"1":"0";e.flg_post_category=d("#welukaWpPostsSettingFlgCategory").prop("checked")?"1":"0";e.flg_post_excerpt=d("#welukaWpPostsSettingFlgExcerpt").prop("checked")?"1":"0";e.flg_post_thumbnail=d("#welukaWpPostsSettingFlgThumb").prop("checked")?"1":"0";e.flg_post_comment=d("#welukaWpPostsSettingFlgComment").prop("checked")?"1":"0";e.excerpt_string_num=d("#welukaWpPostsSettingExcerptStrNum").val();e.more_string=d("#welukaWpPostsSettingMoreStr").val();
e.all_post_url=d("#welukaWpPostsSettingAllLinkUrl").val();e.all_post_link_string=d("#welukaWpPostsSettingAllMoreStr").val();e.list_height=d("#welukaWpPostsSettingHeight").val();e.flg_post_tagcloud=d("#welukaWpPostsSettingFlgTagcloud").prop("checked")?"1":"0";e.tagcloud_pos=d("#welukaWpPostsSettingTagcloudPos").val();var f="";d(".welukaWpPostsSettingCat:checked").map(function(){f=""==f?d(this).val():f+","+d(this).val()});e.categories=f;b._setMarginSettingVal(e,"#weluka-wpposts-setting-form","WpPosts");
b._setCssSettingVal(e,"#weluka-wpposts-setting-form","WpPosts");c=d("#"+e.id);e=b._getHtml(e,e.type,b._currentEditTargetName);e.html&&c.replaceWith(e.html)}b._blockEditDeactive();a.modal("hide")},_widgetWpRssSetting:function(a){b._currentEditTargetName=a.data.target;var c=d("#weluka-wprss-setting-modal");a=b._getModelContent(b._currentEditTargetName);a="s_widget"==b._currentEditTargetName?a.s_widgetData:a.widgetData;c.removeClass("hide");c.modal("show");c=a.title?a.title:"";d("#welukaWpRssSettingTitle").val(c);
c=a.url?a.url:"";d("#welukaWpRssSettingUrl").val(c);1==(a.show_summary?a.show_summary:"")?d("#welukaWpRssSettingShowSummary").prop({checked:"checked"}):d("#welukaWpRssSettingShowSummary").prop({checked:!1});1==(a.show_author?a.show_author:"")?d("#welukaWpRssSettingShowAuthor").prop({checked:"checked"}):d("#welukaWpRssSettingShowAuthor").prop({checked:!1});1==(a.show_date?a.show_date:"")?d("#welukaWpRssSettingShowDate").prop({checked:"checked"}):d("#welukaWpRssSettingShowDate").prop({checked:!1});
c=a.rss_limit?a.rss_limit:"";d("#welukaWpRssSettingLimit").val(c);c=a.list_height?a.list_height:"";d("#welukaWpRssSettingHeight").val(c);b._setMarginSettingFormVal(a,"#weluka-wprss-setting-form","WpRss");a=a.cssClass?a.cssClass:"";d("#welukaWpRssSettingCssClass").val(a)},_widgetWpRssSettingSaved:function(a){a=d("#weluka-wprss-setting-modal");var c=b._getModelContent(b._currentEditTargetName),e="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;e&&(e.title=d("#welukaWpRssSettingTitle").val(),
e.rss_limit=d("#welukaWpRssSettingLimit").val(),e.url=d("#welukaWpRssSettingUrl").val(),e.list_height=d("#welukaWpRssSettingHeight").val(),e.show_summary=d("#welukaWpRssSettingShowSummary").prop("checked")?d("#welukaWpRssSettingShowSummary").val():"0",e.show_author=d("#welukaWpRssSettingShowAuthor").prop("checked")?d("#welukaWpRssSettingShowAuthor").val():"0",e.show_date=d("#welukaWpRssSettingShowDate").prop("checked")?d("#welukaWpRssSettingShowDate").val():"0",b._setMarginSettingVal(e,"#weluka-wprss-setting-form",
"WpRss"),b._setCssSettingVal(e,"#weluka-wprss-setting-form","WpRss"),c=d("#"+e.id),e=b._getHtml(e,e.type,b._currentEditTargetName),e.html&&c.replaceWith(e.html));b._blockEditDeactive();a.modal("hide")},_widgetWpSearchSetting:function(a){b._currentEditTargetName=a.data.target;a=d("#weluka-wpsearch-setting-modal");var c=b._getModelContent(b._currentEditTargetName),c="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;a.removeClass("hide");a.modal("show");a=c.title?c.title:"";d("#welukaWpSearchSettingTitle").val(a);
b._setMarginSettingFormVal(c,"#weluka-wpsearch-setting-form","WpSearch");a=c.cssClass?c.cssClass:"";d("#welukaWpSearchSettingCssClass").val(a)},_widgetWpSearchSettingSaved:function(a){a=d("#weluka-wpsearch-setting-modal");var c=b._getModelContent(b._currentEditTargetName),e="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;e&&(e.title=d("#welukaWpSearchSettingTitle").val(),b._setMarginSettingVal(e,"#weluka-wpsearch-setting-form","WpSearch"),b._setCssSettingVal(e,"#weluka-wpsearch-setting-form",
"WpSearch"),c=d("#"+e.id),e=b._getHtml(e,e.type,b._currentEditTargetName),e.html&&c.replaceWith(e.html));b._blockEditDeactive();a.modal("hide")},_widgetWpTagsSetting:function(a){b._currentEditTargetName=a.data.target;var c=d("#weluka-wptags-setting-modal");a=b._getModelContent(b._currentEditTargetName);a="s_widget"==b._currentEditTargetName?a.s_widgetData:a.widgetData;c.removeClass("hide");c.modal("show");c=a.title?a.title:"";d("#welukaWpTagsSettingTitle").val(c);c=a.taxonomy?a.taxonomy:"";d("#welukaWpTagsSettingtaxonomy").val(c);
b._setMarginSettingFormVal(a,"#weluka-wptags-setting-form","WpTags");a=a.cssClass?a.cssClass:"";d("#welukaWpTagsSettingCssClass").val(a)},_widgetWpTagsSettingSaved:function(a){a=d("#weluka-wptags-setting-modal");var c=b._getModelContent(b._currentEditTargetName),e="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;e&&(e.title=d("#welukaWpTagsSettingTitle").val(),e.taxonomy=d("#welukaWpTagsSettingTaxonomy").val(),b._setMarginSettingVal(e,"#weluka-wptags-setting-form","WpTags"),b._setCssSettingVal(e,
"#weluka-wptags-setting-form","WpTags"),c=d("#"+e.id),e=b._getHtml(e,e.type,b._currentEditTargetName),e.html&&c.replaceWith(e.html));b._blockEditDeactive();a.modal("hide")},_widgetApphorlineSetting:function(a){b._currentEditTargetName=a.data.target;a=d("#weluka-apphorline-setting-modal");var c=b._getModelContent(b._currentEditTargetName),c="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;a.removeClass("hide");a.modal("show");a=c.line_width?c.line_width:"";d("#welukaAppHorlineSettingLineWidth").val(a);
a=c.line_style?c.line_style:"";d("#welukaAppHorlineSettingLineStyle").val(a);a=c.line_color?c.line_color:"";b._initColorPicker("welukaAppHorlineSettingLineColorWrap","welukaAppHorlineSettingLineColor");d("#welukaAppHorlineSettingLineColor").val(a);d("#welukaAppHorlineSettingLineColor").colorpicker();b._setMarginSettingFormVal(c,"#weluka-apphorline-setting-form","AppHorline");a=c.cssClass?c.cssClass:"";d("#welukaWpTagsSettingCssClass").val(a)},_widgetApphorlineSettingSaved:function(a){a=d("#weluka-apphorline-setting-modal");
var c=b._getModelContent(b._currentEditTargetName),e="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;e&&(e.line_width=d("#welukaAppHorlineSettingLineWidth").val(),e.line_style=d("#welukaAppHorlineSettingLineStyle").val(),e.line_color=d("#welukaAppHorlineSettingLineColor").val(),b._setMarginSettingVal(e,"#weluka-apphorline-setting-form","AppHorline"),b._setCssSettingVal(e,"#weluka-apphorline-setting-form","AppHorline"),c=d("#"+e.id),e=b._getHtml(e,e.type,b._currentEditTargetName),
e.html&&c.replaceWith(e.html));b._blockEditDeactive();a.modal("hide")},_widgetTextSettingSaved:function(a){a=d("#weluka-text-setting-modal");var c=b._getModelContent(b._currentEditTargetName),e="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;e.shadow_style=d("#welukaTextSettingShadowStyle").val();e.shadow_color=d("#welukaTextSettingShadowColor").val();b._setBlockStyleSettingVal(e,"#weluka-text-setting-form","Text");b._setMarginSettingVal(e,"#weluka-text-setting-form","Text");b._setCssSettingVal(e,
"#weluka-text-setting-form","Text");c=d("#"+e.id);e=b._getHtml(e,e.type,b._currentEditTargetName);e.html&&c.replaceWith(e.html);b._blockEditDeactive();a.modal("hide")},_widgetImgSettingSaved:function(a){a=d("#weluka-img-setting-modal");var c=d("#welukaImageSettingInvoker").val(),e=c?{}:b._getModelContent(b._currentEditTargetName),e=c?{type:welukaBuilderWp.widget_types.IMG}:"s_widget"==b._currentEditTargetName?e.s_widgetData:e.widgetData,f=d("#weluka-image-setting-form #welukaImageSettingSourceType").val()?
d("#weluka-image-setting-form #welukaImageSettingSourceType").val():"",g=d("#weluka-image-setting-form #welukaImageSettingMediaSize").val()?d("#weluka-image-setting-form #welukaImageSettingMediaSize").val():"",h=d("#weluka-image-setting-form #welukaImageSettingExternUrl").val()?d("#weluka-image-setting-form #welukaImageSettingExternUrl").val():"",k="";"media"!=f||g||(k=welukaBuilderWp.msgs.invalid_image);"extern"!=f||h||(k=welukaBuilderWp.msgs.invalid_image);if(""!=k)alert(k);else{if(e){e.attachment_id=
d("#weluka-image-setting-form #welukaImageSettingMedia_attachment_id").val()?d("#weluka-image-setting-form #welukaImageSettingMedia_attachment_id").val():"";e.title=d("#weluka-image-setting-form #welukaImageSettingMedia_title").val()?d("#weluka-image-setting-form #welukaImageSettingMedia_title").val():"";e.alt=d("#weluka-image-setting-form #welukaImageSettingMedia_alt").val()?d("#weluka-image-setting-form #welukaImageSettingMedia_alt").val():"";e.caption=d("#weluka-image-setting-form #welukaImageSettingMedia_caption").val()?
d("#weluka-image-setting-form #welukaImageSettingMedia_caption").val():"";e.description=d("#weluka-image-setting-form #welukaImageSettingMedia_description").val()?d("#weluka-image-setting-form #welukaImageSettingMedia_description").val():"";e.source_type=f;k={url:"",width:"",height:""};k.url=d("#weluka-image-setting-form #welukaImageSettingMedia_full_url").val()?d("#weluka-image-setting-form #welukaImageSettingMedia_full_url").val():"";k.width=d("#weluka-image-setting-form #welukaImageSettingMedia_full_width").val()?
d("#weluka-image-setting-form #welukaImageSettingMedia_full_width").val():"";k.height=d("#weluka-image-setting-form #welukaImageSettingMedia_full_height").val()?d("#weluka-image-setting-form #welukaImageSettingMedia_full_height").val():"";e.full=k;var l={url:"",width:"",height:""};l.url=d("#weluka-image-setting-form #welukaImageSettingMedia_thumbnail_url").val()?d("#weluka-image-setting-form #welukaImageSettingMedia_thumbnail_url").val():"";l.width=d("#weluka-image-setting-form #welukaImageSettingMedia_thumbnail_width").val()?
d("#weluka-image-setting-form #welukaImageSettingMedia_thumbnail_width").val():"";l.height=d("#weluka-image-setting-form #welukaImageSettingMedia_thumbnail_height").val()?d("#weluka-image-setting-form #welukaImageSettingMedia_thumbnail_height").val():"";e.thumbnail=l;var m={url:"",width:"",height:""};m.url=d("#weluka-image-setting-form #welukaImageSettingMedia_thumbnail_url").val()?d("#weluka-image-setting-form #welukaImageSettingMedia_medium_url").val():"";m.width=d("#weluka-image-setting-form #welukaImageSettingMedia_medium_width").val()?
d("#weluka-image-setting-form #welukaImageSettingMedia_medium_width").val():"";m.height=d("#weluka-image-setting-form #welukaImageSettingMedia_medium_height").val()?d("#weluka-image-setting-form #welukaImageSettingMedia_medium_height").val():"";e.medium=m;var n={url:"",width:"",height:""};n.url=d("#weluka-image-setting-form #welukaImageSettingMedia_large_url").val()?d("#weluka-image-setting-form #welukaImageSettingMedia_large_url").val():"";n.width=d("#weluka-image-setting-form #welukaImageSettingMedia_large_width").val()?
d("#weluka-image-setting-form #welukaImageSettingMedia_large_width").val():"";n.height=d("#weluka-image-setting-form #welukaImageSettingMedia_large_height").val()?d("#weluka-image-setting-form #welukaImageSettingMedia_large_height").val():"";e.large=n;e.external=h;"media"==f&&(e.url="thumbnail"==g?l.url:"medium"==g?m.url:"large"==g?n.url:k.url);e.fitwidth=d("#weluka-image-setting-form #welukaImageSettingFit").prop("checked")?"on":"";e.class_name=d("#weluka-image-setting-form #welukaImageSettingAlign").val()?
d("#weluka-image-setting-form #welukaImageSettingAlign").val():"";e.shape=d("#weluka-image-setting-form #welukaImageSettingShape").val()?d("#weluka-image-setting-form #welukaImageSettingShape").val():"";g={action:"",href:"",target:""};g.action=d("#weluka-image-setting-form #welukaImageSettingLinkAction").val()?d("#weluka-image-setting-form #welukaImageSettingLinkAction").val():"";"gotolink"==g.action?(g.href=d("#weluka-image-setting-form #welukaImageSettingLinkUrl").val()?d("#weluka-image-setting-form #welukaImageSettingLinkUrl").val():
"",g.target=d("#weluka-image-setting-form #welukaImageSettingLinkTarget").prop("checked")?"_blank":""):"zoom"==g.action&&(g.href="extern"==f?h:k.url);e.link=g;b._setBlockStyleSettingVal(e,"#weluka-image-setting-form","Image");b._setMarginSettingVal(e,"#weluka-image-setting-form","Image");b._setCssSettingVal(e,"#weluka-image-setting-form","Image");"applistmodal"!=c&&(c=d("#"+e.id),e=b._getHtml(e,e.type,b._currentEditTargetName),e.html&&c.replaceWith(e.html))}b._blockEditDeactive();a.modal("hide")}},
_widgetButtonSettingSaved:function(a){a=d("#weluka-button-setting-modal");var c=b._getModelContent(b._currentEditTargetName);if(c="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData){c.text=d("#weluka-button-setting-form #welukaButtonSettingText").val()?d("#weluka-button-setting-form #welukaButtonSettingText").val():"BUTTON";c.class_name=d("#weluka-button-setting-form #welukaButtonSettingAlign").val()?d("#weluka-button-setting-form #welukaButtonSettingAlign").val():"";var e={action:"",
href:"",target:""};e.action=d("#weluka-button-setting-form #welukaButtonSettingLinkAction").val()?d("#weluka-button-setting-form #welukaButtonSettingLinkAction").val():"";"gotolink"==e.action&&(e.href=d("#weluka-button-setting-form #welukaButtonSettingLinkUrl").val()?d("#weluka-button-setting-form #welukaButtonSettingLinkUrl").val():"",e.target=d("#weluka-button-setting-form #welukaButtonSettingLinkTarget").prop("checked")?"_blank":"");c.link=e;c.button_color=d("#weluka-button-setting-form #welukaButtonSettingColor").val()?
d("#weluka-button-setting-form #welukaButtonSettingColor").val():"";c.size=d("#weluka-button-setting-form #welukaButtonSettingSize").val()?d("#weluka-button-setting-form #welukaButtonSettingSize").val():"";c.shape=d("#weluka-button-setting-form #welukaButtonSettingShape").val()?d("#weluka-button-setting-form #welukaButtonSettingShape").val():"";c.block=d("#weluka-button-setting-form #welukaButtonSettingBlock").prop("checked")?"on":"";b._setMarginSettingVal(c,"#weluka-button-setting-form","Button");
b._setCssSettingVal(c,"#weluka-button-setting-form","Button");e=d("#"+c.id);c=b._getHtml(c,c.type,b._currentEditTargetName);c.html&&e.replaceWith(c.html)}b._blockEditDeactive();a.modal("hide")},_widgetAppAlertSettingSaved:function(a){a=d("#weluka-appalert-setting-modal");var c=b._getModelContent(b._currentEditTargetName),e="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData;e&&(e.alert_class=d("#weluka-appalert-setting-form #welukaAppAlertSettingType").val()?d("#weluka-appalert-setting-form #welukaAppAlertSettingType").val():
"",e.shape=d("#weluka-appalert-setting-form #welukaAppAlertSettingShape").val()?d("#weluka-appalert-setting-form #welukaAppAlertSettingShape").val():"",e.close_button=d("#weluka-appalert-setting-form #welukaAppAlertSettingCloseBtn").prop("checked")?"on":"",b._setMarginSettingVal(e,"#weluka-appalert-setting-form","AppAlert"),b._setCssSettingVal(e,"#weluka-appalert-setting-form","AppAlert"),c=d("#"+e.id),e=b._getHtml(e,e.type,b._currentEditTargetName),e.html&&c.replaceWith(e.html));b._blockEditDeactive();
a.modal("hide")},_widgetAppembedSettingSaved:function(a){a=d("#weluka-appembed-setting-modal");var c=b._getModelContent(b._currentEditTargetName),c="s_widget"==b._currentEditTargetName?c.s_widgetData:c.widgetData,e=d("#weluka-appembed-setting-form #welukaAppembedSettingCode").val()?d("#weluka-appembed-setting-form #welukaAppembedSettingCode").val():"",f="";e||(f=welukaBuilderWp.msgs.invalid_embedcode);""!=f?alert(f):(c&&(e=e.replace(/<script/g,"{SCRIPT}"),e=e.replace(/<\/script/g,"{/SCRIPT}"),c.code=
e,b._setBlockStyleSettingVal(c,"#weluka-appembed-setting-form","Appembed"),b._setMarginSettingVal(c,"#weluka-appembed-setting-form","Appembed"),b._setCssSettingVal(c,"#weluka-appembed-setting-form","Appembed"),e=d("#"+c.id),c=b._getHtml(c,c.type,b._currentEditTargetName),c.html&&e.replaceWith(c.html)),b._blockEditDeactive(),a.modal("hide"))},_columSetting:function(a){b._currentEditTargetName=a.data.target;a=d("#weluka-col-setting-modal");var c=b._getModelContent(b._currentEditTargetName),c="s_col"==
b._currentEditTargetName?c.s_colData:c.colData;a.removeClass("hide");a.modal("show");a=c.col?c.col:"12";d("#welukaColSettingColumn").val(a);b._setStyleSettingFormVal(c,"#weluka-col-setting-form","Col");b._setMarginSettingFormVal(c,"#weluka-col-setting-form","Col");a=c.cssClass?c.cssClass:"";d("#welukaColSettingCssClass").val(a)},_columSettingSaved:function(a){a=d("#weluka-col-setting-modal");var c=b._getModelContent(b._currentEditTargetName),e="s_col"==b._currentEditTargetName?c.s_colData:c.colData;
e&&(e.col=d("#weluka-col-setting-form #welukaColSettingColumn").val()?d("#weluka-col-setting-form #welukaColSettingColumn").val():12,b._setBlockStyleSettingVal(e,"#weluka-col-setting-form","Col"),b._setMarginSettingVal(e,"#weluka-col-setting-form","Col"),b._setCssSettingVal(e,"#weluka-col-setting-form","Col"),c=d("#"+e.id),e=b._getHtml(e,"",b._currentEditTargetName),e.html&&c.replaceWith(e.html));b._blockEditDeactive();a.modal("hide")},_rowSetting:function(a){b._currentEditTargetName=a.data.target;
a=d("#weluka-row-setting-modal");var c=b._getModelContent(b._currentEditTargetName),c="s_row"==b._currentEditTargetName?c.s_rowData:c.rowData;a.removeClass("hide");a.modal("show");b._setStyleSettingFormVal(c,"#weluka-row-setting-form","Row");b._setMarginSettingFormVal(c,"#weluka-row-setting-form","Row");a=c.cssClass?c.cssClass:"";d("#welukaRowSettingCssClass").val(a)},_rowSettingSaved:function(a){a=d("#weluka-row-setting-modal");var c=b._getModelContent(b._currentEditTargetName);if(c="s_row"==b._currentEditTargetName?
c.s_rowData:c.rowData){b._setBlockStyleSettingVal(c,"#weluka-row-setting-form","Row");b._setMarginSettingVal(c,"#weluka-row-setting-form","Row");b._setCssSettingVal(c,"#weluka-row-setting-form","Row");var e=d("#"+c.id),f=b._getHtml(c,"",b._currentEditTargetName);f.html&&e.replaceWith(f.html)}d("#"+c.id).prev(".weluka-horizontal-drop-handle").remove();b._blockEditDeactive();a.modal("hide")},_sectionSetting:function(a){b._currentEditTargetName=a.data.target;var c=d("#weluka-section-setting-modal");
a=b._getModelContent("section").sectionData;c.removeClass("hide");c.modal("show");var c="",c=null,e="",c=d("#weluka-section-setting-media-input-content"),e=a.attachment_id&&""!=a.attachment_id?b._setSectionSingleMediaInfo(a,!1):b._imgSettingMediaSelectButton(!1,"section","section","#welukaSectionSettingMedia_attachment_id");c.html(e);c=a.bgsize_type?a.bgsize_type:"cover";"num"==c?d("#welukaSectionSettingBgSizeType_0").prop({checked:"checked"}):"cover"==c?d("#welukaSectionSettingBgSizeType_1").prop({checked:"checked"}):
"contain"==c&&d("#welukaSectionSettingBgSizeType_2").prop({checked:"checked"});c=a.bgsize?a.bgsize:"";d("#welukaSectionSettingBgSize").val(c);c=a.bgpos?a.bgpos:"";d("#welukaSectionSettingBgPos").val(c);c=a.bgrepeat?a.bgrepeat:"no-repeat";"repeat"==c?d("#welukaSectionSettingBgRepeat_1").prop({checked:"checked"}):"repeat-x"==c?d("#welukaSectionSettingBgRepeat_2").prop({checked:"checked"}):"repeat-y"==c?d("#welukaSectionSettingBgRepeat_3").prop({checked:"checked"}):d("#welukaSectionSettingBgRepeat_0").prop({checked:"checked"});
c=a.bgattachment?a.bgattachment:"fixed";"fixed"==c?d("#welukaSectionSettingBgAttachment_1").prop({checked:"checked"}):d("#welukaSectionSettingBgAttachment_0").prop({checked:"checked"});c=a.background_color?a.background_color:"";b._initColorPicker("welukaSectionSettingBgColorWrap","welukaSectionSettingBgColor");d("#welukaSectionSettingBgColor").val(c);d("#welukaSectionSettingBgColor").colorpicker();c=a.color?a.color:"";b._initColorPicker("welukaSectionSettingColorWrap","welukaSectionSettingColor");
d("#welukaSectionSettingColor").val(c);d("#welukaSectionSettingColor").colorpicker();c=a.anchor_id?a.anchor_id:"";d("#welukaSectionSettingAnchor").val(c);b._setMarginSettingFormVal(a,"#weluka-section-setting-form","Section");c=a.cssClass?a.cssClass:"";d("#welukaSectionSettingCssClass").val(c)},_sectionSettingSaved:function(a){a=d("#weluka-section-setting-modal");var c=b._getModelContent("section").sectionData;if(c){c.attachment_id=d("#weluka-section-setting-form #welukaSectionSettingMedia_attachment_id").val();
var e={url:"",width:"",height:""};e.url=d("#weluka-section-setting-form #welukaSectionSettingMedia_full_url").val();e.width=d("#weluka-section-setting-form #welukaSectionSettingMedia_full_width").val();e.height=d("#weluka-section-setting-form #welukaSectionSettingMedia_full_height").val();c.background_image=e.url;c.full=e;c.bgsize_type=d("#weluka-section-setting-form input:radio[name='welukaSectionSettingBgSizeType']:checked").val();c.bgsize=d("#weluka-section-setting-form #welukaSectionSettingBgSize").val();
c.bgpos=d("#weluka-section-setting-form #welukaSectionSettingBgPos").val();c.bgrepeat=d("#weluka-section-setting-form input:radio[name='welukaSectionSettingBgRepeat']:checked").val();c.bgattachment=d("#weluka-section-setting-form input:radio[name='welukaSectionSettingBgAttachment']:checked").val();c.background_color=d("#weluka-section-setting-form #welukaSectionSettingBgColor").val();c.color=d("#weluka-section-setting-form #welukaSectionSettingColor").val();c.anchor_id=d("#weluka-section-setting-form #welukaSectionSettingAnchor").val();
b._setMarginSettingVal(c,"#weluka-section-setting-form","Section");b._setCssSettingVal(c,"#weluka-section-setting-form","Section");e=d("#"+c.id);c=b._getHtml(c,c.type,"section");c.html&&e.replaceWith(c.html)}b._blockEditDeactive();a.modal("hide")},_setSectionSingleMediaInfo:function(a,c){var e="",f=d("#weluka-section-setting-media-input-content"),g=a.full?a.full:{url:"",width:"",height:""},e=e+'<div class="img-thumb-wrap-wide" style="background-image:url('+g.url+'); background-size:cover;"></div>',
e=e+'<div class="weluka-mgtop-s">'+b._imgSettingMediaSelectButton(!0,"section","section","#welukaSectionSettingMedia_attachment_id"),e=e+'&nbsp;&nbsp;<button type="button" data-target="section" class="single-media-remove weluka-btn weluka-btn-org weluka-btn-warning btn-xs">'+welukaBuilderWp.msgs.remove+"</button></div>",e=e+'<input type="hidden" id="welukaSectionSettingMedia_full_url" name="welukaSectionSettingMedia_full_url" value="'+g.url+'" />',e=e+'<input type="hidden" id="welukaSectionSettingMedia_full_width" name="welukaSectionSettingMedia_full_width" value="'+
g.width+'" />',e=e+'<input type="hidden" id="welukaSectionSettingMedia_full_height" name="welukaSectionSettingMedia_full_height" value="'+g.height+'" />';"undefined"!==typeof a.attachment_id&&(e=e+'<input type="hidden" id="welukaSectionSettingMedia_attachment_id" name="welukaSectionSettingMedia_attachment_id" value="'+a.attachment_id+'" />');if(c)f.html(e);else return e},_singleMediaRemoved:function(a){a="";if("section"==(d(this).data("target")?d(this).data("target"):"widget")){var c=d("#weluka-section-setting-media-input-content");
a=b._imgSettingMediaSelectButton(!1,"section","section","#welukaSectionSettingMedia_attachment_id");c.html(a)}},_setMarginSettingFormVal:function(a,c,b){var f=c+" #weluka"+b+"SettingMargin",g=a.margin_top?a.margin_top:"",h=a.margin_bottom?a.margin_bottom:"",k=a.margin_left?a.margin_left:"",l=a.margin_right?a.margin_right:"",m=a.padding_top?a.padding_top:"",n=a.padding_bottom?a.padding_bottom:"",q=a.padding_left?a.padding_left:"";a=a.padding_right?a.padding_right:"";d(f+"Top")&&d(f+"Top").val(g);d(f+
"Bottom")&&d(f+"Bottom").val(h);d(f+"Left")&&d(f+"Left").val(k);d(f+"Right")&&d(f+"Right").val(l);f=c+" #weluka"+b+"SettingPadding";d(f+"Top")&&d(f+"Top").val(m);d(f+"Bottom")&&d(f+"Bottom").val(n);d(f+"Left")&&d(f+"Left").val(q);d(f+"Right")&&d(f+"Right").val(a)},_setStyleSettingFormVal:function(a,c,e){c="weluka"+e+"SettingBlockBgColor";var f=a.background_color?a.background_color:"",g="weluka"+e+"SettingBlockColor",h=a.color?a.color:"",k="weluka"+e+"SettingBlockBorderSize",l=a.border_size?a.border_size:
"",m="weluka"+e+"SettingBlockBorderStyle",n=a.border_style?a.border_style:"",q="weluka"+e+"SettingBlockBorderColor",p=a.border_color?a.border_color:"";e="weluka"+e+"SettingBlockShape";a=a.block_shape?a.block_shape:"";b._initColorPicker(c+"Wrap",c);b._initColorPicker(g+"Wrap",g);b._initColorPicker(q+"Wrap",q);d("#"+c)&&d("#"+c).val(f);d("#"+c).colorpicker();d("#"+g)&&d("#"+g).val(h);d("#"+g).colorpicker();d("#"+k)&&d("#"+k).val(l);d("#"+m)&&d("#"+m).val(n);d("#"+q)&&d("#"+q).val(p);d("#"+q).colorpicker();
d("#"+e)&&d("#"+e).val(a)},_setBlockStyleSettingVal:function(a,c,b){var f=c+" #weluka"+b+"SettingBlockBgColor",g=c+" #weluka"+b+"SettingBlockColor",h=c+" #weluka"+b+"SettingBlockBorderSize",k=c+" #weluka"+b+"SettingBlockBorderStyle",l=c+" #weluka"+b+"SettingBlockBorderColor";c=c+" #weluka"+b+"SettingBlockShape";a.background_color=d(f).val()?d(f).val():"";a.color=d(g).val()?d(g).val():"";a.border_size=d(h).val()?d(h).val():"";a.border_style=d(k).val()?d(k).val():"";a.border_color=d(l).val()?d(l).val():
"";a.block_shape=d(c).val()?d(c).val():""},_setMarginSettingVal:function(a,c,b){var f=c+" #weluka"+b+"SettingMargin";a.margin_top=d(f+"Top").val()?d(f+"Top").val():"";a.margin_bottom=d(f+"Bottom").val()?d(f+"Bottom").val():"";a.margin_left=d(f+"Left").val()?d(f+"Left").val():"";a.margin_right=d(f+"Right").val()?d(f+"Right").val():"";f=c+" #weluka"+b+"SettingPadding";a.padding_top=d(f+"Top").val()?d(f+"Top").val():"";a.padding_bottom=d(f+"Bottom").val()?d(f+"Bottom").val():"";a.padding_left=d(f+"Left").val()?
d(f+"Left").val():"";a.padding_right=d(f+"Right").val()?d(f+"Right").val():""},_setCssSettingVal:function(a,c,b){c=c+" #weluka"+b+"SettingCss";a.cssClass=d(c+"Class").val()?d(c+"Class").val():""},_wpLinkOpen:function(a){b._curWpLinkElm=d(a.target);a=b._curWpLinkElm.data("linkTextarea")?b._curWpLinkElm.data("linkTextarea"):"html";if("undefined"!==typeof b._wpLink&&b._wpLink)return"undefined"==typeof parent.wpActiveEditor&&(parent.wpActiveEditor=!0),b._wpLink.open(),b._wpLink.textarea=d(a),!1},_wpLinkSubmit:function(a){if("undefined"==
typeof b._curWpLinkElm||!b._curWpLinkElm)return!1;a=b._wpLink.getAttrs();var c=b._curWpLinkElm.data("linkTarget")?b._curWpLinkElm.data("linkTarget"):"";"widgetimgmodal"==c?b._setImgSettingLink(a):"widgetbuttonmodal"==c&&b._setButtonSettingLink(a);b._wpLinkClose();return!1},_wpLinkCancel:function(a){if("undefined"==typeof b._curWpLinkElm||!b._curWpLinkElm)return!1;b._wpLinkClose();return!1},_wpLinkClose:function(){b._wpLink.close();b._wpLink.textarea=d("html");b._curWpLinkElm=null},_imgSettingMediaSelectButton:function(a,
c,b,d){return'<button type="button" data-type="'+c+'" data-media-target="'+b+'" data-idfield="'+d+'" class="single-media-btn weluka-btn weluka-btn-org weluka-btn-info btn-xs">'+welukaBuilderWp.msgs.select_image+"</button>"},_setWidgetSingleMediaInfo:function(a,c){var e="",f=a.url?a.url:"",g="",h=d("#weluka-image-setting-media-input-content"),e='<div class="weluka-row clearfix"><div class="weluka-col-xs-4"><div class="img-thumb-wrap" style="background-image:url('+a.full.url+'); background-size:cover;"></div></div>';
f==a.full.url&&(g=' selected="selected"');e=e+'<div class="weluka-col-xs-8"><div><select id="welukaImageSettingMediaSize" name="welukaImageSettingMediaSize" class="form-control"><option value="full"'+g+">Full - "+a.full.width+"x"+a.full.height+"</option>";g="";"undefined"!==typeof a.thumbnail&&a.thumbnail.url&&(f==a.thumbnail.url&&(g=' selected="selected"'),e=e+'<option value="thumbnail"'+g+">Thumbnail - "+a.thumbnail.width+"x"+a.thumbnail.height+"</option>");g="";"undefined"!==typeof a.medium&&a.medium.url&&
(f==a.medium.url&&(g=' selected="selected"'),e=e+'<option value="medium"'+g+">Medium - "+a.medium.width+"x"+a.medium.height+"</option>");g="";"undefined"!==typeof a.large&&a.large.url&&(f==a.large.url&&(g=' selected="selected"'),e=e+'<option value="large"'+g+">Large - "+a.large.width+"x"+a.large.height+"</option>");e=e+'</select></div><div class="weluka-mgtop-s">'+b._imgSettingMediaSelectButton(!1,welukaBuilderWp.widget_types.IMG,b._currentEditTargetName,"#welukaImageSettingMedia_attachment_id")+
"</div>";e=e+'<input type="hidden" id="welukaImageSettingMedia_full_url" name="welukaImageSettingMedia_full_url" value="'+a.full.url+'" />';e=e+'<input type="hidden" id="welukaImageSettingMedia_full_width" name="welukaImageSettingMedia_full_width" value="'+a.full.width+'" />';e=e+'<input type="hidden" id="welukaImageSettingMedia_full_height" name="welukaImageSettingMedia_full_height" value="'+a.full.height+'" />';"undefined"!==typeof a.thumbnail&&(e=e+'<input type="hidden" id="welukaImageSettingMedia_thumbnail_url" name="welukaImageSettingMedia_thumbnail_url" value="'+
a.thumbnail.url+'" />',e=e+'<input type="hidden" id="welukaImageSettingMedia_thumbnail_width" name="welukaImageSettingMedia_thumbnail_width" value="'+a.thumbnail.width+'" />',e=e+'<input type="hidden" id="welukaImageSettingMedia_thumbnail_height" name="welukaImageSettingMedia_thumbnail_height" value="'+a.thumbnail.height+'" />');"undefined"!==typeof a.medium&&(e=e+'<input type="hidden" id="welukaImageSettingMedia_medium_url" name="welukaImageSettingMedia_medium_url" value="'+a.medium.url+'" />',e=
e+'<input type="hidden" id="welukaImageSettingMedia_medium_width" name="welukaImageSettingMedia_medium_width" value="'+a.medium.width+'" />',e=e+'<input type="hidden" id="welukaImageSettingMedia_medium_height" name="welukaImageSettingMedia_medium_height" value="'+a.medium.height+'" />');"undefined"!==typeof a.large&&(e=e+'<input type="hidden" id="welukaImageSettingMedia_large_url" name="welukaImageSettingMedia_large_url" value="'+a.large.url+'" />',e=e+'<input type="hidden" id="welukaImageSettingMedia_large_width" name="welukaImageSettingMedia_large_width" value="'+
a.large.width+'" />',e=e+'<input type="hidden" id="welukaImageSettingMedia_large_height" name="welukaImageSettingMedia_large_height" value="'+a.large.height+'" />');"undefined"!==typeof a.attachment_id&&(e=e+'<input type="hidden" id="welukaImageSettingMedia_attachment_id" name="welukaImageSettingMedia_attachment_id" value="'+a.attachment_id+'" />');"undefined"!==typeof a.title&&(e=e+'<input type="hidden" id="welukaImageSettingMedia_title" name="welukaImageSettingMedia_title" value="'+a.title+'" />');
"undefined"!==typeof a.alt&&(e=e+'<input type="hidden" id="welukaImageSettingMedia_alt" name="welukaImageSettingMedia_alt" value="'+a.alt+'" />');"undefined"!==typeof a.caption&&(e=e+'<input type="hidden" id="welukaImageSettingMedia_caption" name="welukaImageSettingMedia_caption" value="'+a.caption+'" />');"undefined"!==typeof a.description&&(e=e+'<input type="hidden" id="welukaImageSettingMedia_description" name="welukaImageSettingMedia_description" value="'+a.description+'" />');e+="</div></div>";
if(c)h.html(e);else return e},_singleMedia:function(a){null===b._singleImgFrame&&(b._singleImgFrame=wp.media({title:welukaBuilderWp.msgs.img_frame_title,button:{text:welukaBuilderWp.msgs.img_frame_button},library:{type:"image"},multiple:!1}));a=d(a.target);b._singleImgFrame.once("open",d.proxy(b._singleImgOpened,a));b._singleImgFrame.once("select",d.proxy(b._singleImgSelected,a));b._singleImgFrame.open()},_singleImgOpened:function(){var a=b._singleImgFrame.state().get("selection"),c=d(this).data("idfield")?
d(this).data("idfield"):"",e=null,c=""!=c&&d(c)[0]?d(c).val():"";""!=c?(e=wp.media.attachment(c),e.fetch(),a.add(e?[e]:[])):a.reset()},_singleImgSelected:function(){var a=b._singleImgFrame.state().get("selection").first().toJSON(),c=d(this).data("mediaTarget")?d(this).data("mediaTarget"):"widget",e={attachment_id:a.id,title:a.title,alt:a.alt,caption:a.caption,description:a.description};"undefined"!==typeof a.sizes.thumbnail&&(e.thumbnail=a.sizes.thumbnail);"undefined"!==typeof a.sizes.medium&&(e.medium=
a.sizes.medium);"undefined"!==typeof a.sizes.large&&(e.large=a.sizes.large);"undefined"!==typeof a.sizes.full&&(e.full=a.sizes.full);"section"==c?b._setSectionSingleMediaInfo(e,!0):b._setWidgetSingleMediaInfo(e,!0)},_imgSettingMultiMediaSelectButton:function(a,c,b,d){return'<button type="button" data-type="'+c+'" data-media-target="'+b+'" data-idfield="'+d+'" class="multiple-media-btn weluka-btn weluka-btn-org weluka-btn-info btn-s">'+welukaBuilderWp.msgs.select_image+"</button>"},_multipleMedia:function(a){a=
d(a.target);null===b._multipleImgFrame&&(b._multipleImgFrame=wp.media({title:welukaBuilderWp.msgs.img_frame_title,button:{text:welukaBuilderWp.msgs.img_frame_button},library:{type:"image"},multiple:!0}));b._multipleImgFrame.once("open",d.proxy(b._multipleImgOpened,a));b._multipleImgFrame.once("select",d.proxy(b._multipleImgSelected,a));b._multipleImgFrame.open()},_multipleImgOpened:function(){var a=b._multipleImgFrame.state().get("selection"),c=d(this).data("idfield")?d(this).data("idfield"):"",e=
""!=c&&d(c)[0]?d(c).val():"",c=null;a.reset();if(""!=e){var e=e.split(","),f;for(f=0;f<e.length;f++)e[f]&&(c=wp.media.attachment(e[f]),c.fetch(),a.add(c))}},_multipleImgSelected:function(){var a=b._multipleImgFrame.state().get("selection");d(this).data("type")&&d(this).data("type");var c=[],e=null,f=0;a.map(function(a){e=a.toJSON();c[f]={attachment_id:e.id,title:e.title,description:e.description,thumbnail:"undefined",medium:"undefined",large:"undefined",full:"undefined"};"undefined"!==typeof e.sizes.thumbnail&&
(c[f].thumbnail=e.sizes.thumbnail);"undefined"!==typeof e.sizes.medium&&(c[f].medium=e.sizes.medium);"undefined"!==typeof e.sizes.large&&(c[f].large=e.sizes.large);"undefined"!==typeof e.sizes.full&&(c[f].full=e.sizes.full);f+=1})},_pageSetting:function(a){if(!welukaContentModel||"undefined"==typeof welukaContentModel.sections||d("#weluka-new-blank")[0])return alert(welukaBuilderWp.msgs.contentmodel_warning),!1;a=d("#weluka-page-setting-modal");var c=b._getPageSettingData();a.removeClass("hide");
a.modal("show");c&&"undefined"!==typeof c.seo_title&&d("#welukaPageSettingSeoTitle").val(c.seo_title);c&&"undefined"!==typeof c.seo_keywords&&d("#welukaPageSettingSeoKeywords").val(c.seo_keywords);c&&"undefined"!==typeof c.seo_description&&d("#welukaPageSettingSeoDescription").val(c.seo_description)},_pageSettingSaved:function(a){a=d("#weluka-page-setting-modal");var c=b._getPageSettingData();if(!c){if(!welukaContentModel)return alert(welukaBuilderWp.msgs.contentmodel_warning),!1;welukaContentModel.pagesetting=
{seo_title:"",seo_keywords:"",seo_description:"",onepage:"0",hide_hd:"0",hide_ft:"0",hide_title:"0",hide_postmeta:"0",hd_id:"",ft_id:"",sd_main_id:"",sd_sub_id:"",hide_sd_main:"0",hide_sd_sub:"0",hide_post_tagcloud:"-1",post_tagcloud_pos:"",hide_post_paging:"-1",hide_breadcrumb:"",show_sd_main:"0",show_sd_sub:"0",show_sd_main_place:"",out_container_type:"",hide_eyecatch:"-1",eyecatch_align:"",eyecatch_shape:"",eyecatch_fitwidth:"-1"};c=welukaContentModel.pagesetting}c.seo_title=d("#weluka-page-setting-form #welukaPageSettingSeoTitle").val();
c.seo_keywords=d("#weluka-page-setting-form #welukaPageSettingSeoKeywords").val();c.seo_description=d("#weluka-page-setting-form #welukaPageSettingSeoDescription").val();a.modal("hide")},_getPageSettingData:function(){return welukaContentModel.pagesetting?welukaContentModel.pagesetting:null},_getModelContent:function(a){var c={sectionData:null,secIdx:null,rowData:null,rowIdx:null,colData:null,colIdx:null,widgetData:null,widgetIdx:null,s_rowData:null,s_rowIdx:null,s_colData:null,s_colIdx:null,s_widgetData:null,
s_widgetIdx:null},d=null,f=null,g=null,h=null,k=null,l=null,m=null;b._currentWidgetEditInfo.sectionId&&welukaContentModel.sections&&(d=welukaContentModel.sections.filter(function(a,d){if(a.id==b._currentWidgetEditInfo.sectionId)return c.secIdx=d,!0}));c.sectionData=d instanceof Array?d[0]:null;if("section"==a)return c;b._currentWidgetEditInfo.rowId&&d[0].rows&&(f=d[0].rows.filter(function(a,d){if(a.id==b._currentWidgetEditInfo.rowId)return c.rowIdx=d,!0}));c.rowData=f instanceof Array?f[0]:null;if("row"==
a)return c;b._currentWidgetEditInfo.colId&&f[0].colums&&(g=f[0].colums.filter(function(a,d){if(a.id==b._currentWidgetEditInfo.colId)return c.colIdx=d,!0}));c.colData=g instanceof Array?g[0]:null;if("col"==a)return c;b._currentWidgetEditInfo.widgetId&&g[0].items&&(h=g[0].items.filter(function(a,d){if(a.id==b._currentWidgetEditInfo.widgetId)return c.widgetIdx=d,!0}));c.widgetData=h instanceof Array?h[0]:null;if("widget"==a)return c;b._currentWidgetEditInfo.s_rowId&&h[0].subrows&&(k=h[0].subrows.filter(function(a,
d){if(a.id==b._currentWidgetEditInfo.s_rowId)return c.s_rowIdx=d,!0}));c.s_rowData=k instanceof Array?k[0]:null;if("s_row"==a)return c;b._currentWidgetEditInfo.s_colId&&k[0].subcolums&&(l=k[0].subcolums.filter(function(a,d){if(a.id==b._currentWidgetEditInfo.s_colId)return c.s_colIdx=d,!0}));c.s_colData=l instanceof Array?l[0]:null;if("s_col"==a)return c;b._currentWidgetEditInfo.s_widgetId&&l[0].subitems&&(m=l[0].subitems.filter(function(a,d){if(a.id==b._currentWidgetEditInfo.s_widgetId)return c.s_widgetIdx=
d,!0}));c.s_widgetData=m instanceof Array?m[0]:null;return c},_widgetRemove:function(a){if(confirm(welukaBuilderWp.msgs.remove_confirm_msg)){var c=d(a.target),e=a.data.target;b._setCurrentEditInfo(c);b._widgetModelAndDomRemove(b._getModelContent(e),e)}a.stopPropagation()},_blockMoveInit:function(a){a=d(a.target);var c=null;b._dragEnabled=!0;0<a.closest(".weluka-widget").length?(c=a.closest(".weluka-widget"),0<a.closest(".weluka-s-widget").length?c=a.closest(".weluka-s-widget"):0<a.closest(".weluka-s-col-block").length?
c=a.closest(".weluka-s-col-block"):0<a.closest(".weluka-s-row-block").length&&(c=a.closest(".weluka-s-row-block"))):0<a.closest(".weluka-col-block").length?c=a.closest(".weluka-col-block"):0<a.closest(".weluka-row-block").length?c=a.closest(".weluka-row-block"):0<a.closest(".weluka-section-block").length&&(c=a.closest(".weluka-section-block"));null!=c?(a.css("color","#999"),b._currentDragElement.dragId=c.attr("id")):b._currentDragElement.dragId="";b._currentDragElement.dragElm=a;b._removeOverlayEvents()},
_blockDragCancel:function(a){b._dragEnabled&&!p.isDragging&&(b._dragEnabled=!1,b._currentDragElement.dragId&&(b._currentDragElement.dragElm.addClass("fa fa-arrows"),b._currentDragElement.dragElm.text(""),b._currentDragElement.dragElm.css("color","")),b._currentDragElement={},b._setOverlayEvents())},_dragStart:function(a){a=a.originalEvent||a;var c=d(a.target),e=c.data("addType")?c.data("addType"):"",f=c.data("dragObject")?c.data("dragObject"):"",g=c.data("dndEffectAllowed")?c.data("dndEffectAllowed"):
"move",h=b._currentDragElement.dragId?b._currentDragElement.dragId:"",e={dragId:h,dragObject:f,dragAddType:e};b._currentDragElement.dragObject=f;a.dataTransfer.setData("Text",r.stringify(e));a.dataTransfer.effectAllowed=g;c.addClass("welua-dragging");"move"==g&&""!=h&&setTimeout(function(){d("#"+h).addClass("weluka-move-dragging")},0);p.isDragging=!0;p.dragType=c.data("dndType")?eval(c.data("dndType")):void 0},_dragClicked:function(a){a=a.originalEvent||a;a.stopPropagation()},_dragEnd:function(a){a=
a.originalEvent||a;d(a.target).removeClass("welua-dragging");b._currentDragElement.dragId&&(d("#"+b._currentDragElement.dragId).removeClass("weluka-move-dragging"),b._currentDragElement.dragElm.addClass("fa fa-arrows"),b._currentDragElement.dragElm.text(""),b._currentDragElement.dragElm.css("color",""));b._currentDragElement={};b._removeDroppableActive();b._dragEnabled=!1;p.isDragging=!1;b._setOverlayEvents();b._blockEditDeactive();b._popOverHide()},_dragOver:function(a){a=a.originalEvent||a;a.preventDefault();
if(!b._currentDragElement||!b._currentDragElement.dragElm.hasClass("weluka-draggable"))return!1;a=d(a.target);var c=a.data("welukaDropPosition"),e=a.data("posTitle")?a.data("posTitle"):c;if(!b._checkDropEnabled(c))return!1;"new"==c?a.addClass("weluka-drop-new-panel-hover"):(a.hasClass("weluka-horizontal-drop-handle")?a.addClass("weluka-drop-hover"):a.addClass("weluka-drop-hover-vertical"),a.html("<span>"+e+"</span>"));return!1},_drop:function(a){a=a.originalEvent||a;var c=d(a.target);a.preventDefault();
a=a.dataTransfer.getData("Text")||a.dataTransfer.getData("text/plain");var e;try{e=d.parseJSON(a)}catch(f){return b._stopDragover(c)}a=c.data("welukaDropPosition");if(b._checkDropEnabled(a))switch(a){case "section":b._sectionBlock(e,c);break;case "row":b._rowBlock(e,c);break;case "subrow":b._s_rowBlock(e,c);break;case "col-top-in":case "col-bottom-in":b._widgetBlock(e,c,a);break;case "col-left-out":case "col-right-out":b._columBlock(e,c,a);break;case "s-col-top-in":case "s-col-bottom-in":b._s_widgetBlock(e,
c,a);break;case "s-col-left-out":case "s-col-right-out":b._s_columBlock(e,c,a);break;case "s-in-col-left-out":case "s-in-col-right-out":b._s_in_columBlock(e,c,a);break;case "new":b._newContentModel(e,c)}b._stopDragover(c);return!1},_dragLeave:function(a){a=a.originalEvent||a;a=d(a.target);"new"!=a.data("welukaDropPosition")&&a.html("");!a.hasClass("weluka-horizontal-drop-handle")||a.hasClass("weluka-drop-col-top-in")||a.hasClass("weluka-drop-col-bottom-in")||(a.addClass("weluka-droppable-active"),
a.html("&nbsp;"));a.removeClass("weluka-drop-hover");a.removeClass("weluka-drop-hover-vertical");a.removeClass("weluka-drop-new-panel-hover")},dragEnter:function(a){a=a.originalEvent||a;a.preventDefault();return!1},_stopDragover:function(a){a.html("");a.removeClass("weluka-drop-hover");a.removeClass("weluka-drop-hover-vertical");a.removeClass("weluka-drop-new-panel-hover");b._currentDragElement.dragElm&&b._currentDragElement.dragElm.removeClass("welua-dragging");b._currentDragElement.dragId&&(d("#"+
b._currentDragElement.dragId).removeClass("weluka-move-dragging"),b._currentDragElement.dragElm.addClass("fa fa-arrows"),b._currentDragElement.dragElm.text(""),b._currentDragElement.dragElm.css("color",""));b._removeDroppableActive();b._dragEnabled=!1;p.isDragging=!1;b._currentDragElement={};b._blockEditDeactive();b._popOverHide();b._setOverlayEvents();return!0},_checkDropEnabled:function(a){var c=!0;switch(a){case "row":"section"==b._currentDragElement.dragObject&&(c=!1);break;case "subrow":if("section"==
b._currentDragElement.dragObject||"row"==b._currentDragElement.dragObject||"col"==b._currentDragElement.dragObject)c=!1;break;case "col-top-in":case "col-bottom-in":if("section"==b._currentDragElement.dragObject||"row"==b._currentDragElement.dragObject||"col"==b._currentDragElement.dragObject)c=!1;break;case "col-left-out":case "col-right-out":if("row"==b._currentDragElement.dragObject||"section"==b._currentDragElement.dragObject||"s_row"==b._currentDragElement.dragObject)c=!1;break;case "s-col-top-in":case "s-col-bottom-in":""!=
b._currentDragElement.dragObject&&"s_widget"!=b._currentDragElement.dragObject&&"widget"!=b._currentDragElement.dragObject&&(c=!1);break;case "s-col-left-out":case "s-col-right-out":if("row"==b._currentDragElement.dragObject||"section"==b._currentDragElement.dragObject||"col"==b._currentDragElement.dragObject||"s_row"==b._currentDragElement.dragObject||"s_col"==b._currentDragElement.dragObject)c=!1;break;case "s-in-col-left-out":case "s-in-col-right-out":if("row"==b._currentDragElement.dragObject||
"section"==b._currentDragElement.dragObject||"col"==b._currentDragElement.dragObject||"s_row"==b._currentDragElement.dragObject)c=!1}return c},_removeDroppableActive:function(){d(b._builderContentId+" .weluka-droppable-active").each(function(){d(this).html("");d(this).removeClass("weluka-droppable-active")})},_getSectionIndex:function(a){var c=null,b;if(welukaContentModel.sections)for(b=0;b<welukaContentModel.sections.length;b++)if(welukaContentModel.sections[b].id==a){c=b;break}return c},_widgetModelAndDomRemove:function(a,
c){var e=!1,f=!1,g=a.s_widgetData?a.s_widgetData.id:null;null!=g&&(welukaContentModel.sections[a.secIdx].rows[a.rowIdx].colums[a.colIdx].items[a.widgetIdx].subrows[a.s_rowIdx].subcolums[a.s_colIdx].subitems.splice(a.s_widgetIdx,1),d("#"+g).remove());g=a.s_colData?a.s_colData.id:null;null==g||"undefined"!=typeof welukaContentModel.sections[a.secIdx].rows[a.rowIdx].colums[a.colIdx].items[a.widgetIdx].subrows[a.s_rowIdx].subcolums[a.s_colIdx].subitems&&0!=welukaContentModel.sections[a.secIdx].rows[a.rowIdx].colums[a.colIdx].items[a.widgetIdx].subrows[a.s_rowIdx].subcolums[a.s_colIdx].subitems.length&&
"s_col"!=c||(welukaContentModel.sections[a.secIdx].rows[a.rowIdx].colums[a.colIdx].items[a.widgetIdx].subrows[a.s_rowIdx].subcolums.splice(a.s_colIdx,1),d("#"+g).remove(),f=!0);g=a.s_rowData?a.s_rowData.id:null;null==g||"undefined"!=typeof welukaContentModel.sections[a.secIdx].rows[a.rowIdx].colums[a.colIdx].items[a.widgetIdx].subrows[a.s_rowIdx].subcolums&&0!=welukaContentModel.sections[a.secIdx].rows[a.rowIdx].colums[a.colIdx].items[a.widgetIdx].subrows[a.s_rowIdx].subcolums.length&&"s_row"!=c||
(welukaContentModel.sections[a.secIdx].rows[a.rowIdx].colums[a.colIdx].items[a.widgetIdx].subrows.splice(a.s_rowIdx,1),d("#"+h).prev(".weluka-horizontal-drop-handle").remove(),d("#"+g).remove());h=a.widgetData?a.widgetData.id:null;null==h||"undefined"!=typeof welukaContentModel.sections[a.secIdx].rows[a.rowIdx].colums[a.colIdx].items[a.widgetIdx].subrows&&0!=welukaContentModel.sections[a.secIdx].rows[a.rowIdx].colums[a.colIdx].items[a.widgetIdx].subrows.length&&"widget"!=c||(welukaContentModel.sections[a.secIdx].rows[a.rowIdx].colums[a.colIdx].items.splice(a.widgetIdx,
1),d("#"+h).remove());h=a.colData?a.colData.id:null;null==h||0!=welukaContentModel.sections[a.secIdx].rows[a.rowIdx].colums[a.colIdx].items.length&&"col"!=c||(welukaContentModel.sections[a.secIdx].rows[a.rowIdx].colums.splice(a.colIdx,1),d("#"+h).remove(),e=!0);var h=a.rowData?a.rowData.id:null;null==h||0!=welukaContentModel.sections[a.secIdx].rows[a.rowIdx].colums.length&&"row"!=c||(welukaContentModel.sections[a.secIdx].rows.splice(a.rowIdx,1),d("#"+h).prev(".weluka-horizontal-drop-handle").remove(),
d("#"+h).remove());h=a.sectionData?a.sectionData.id:null;null==h||0!=welukaContentModel.sections[a.secIdx].rows.length&&"section"!=c||(welukaContentModel.sections.splice(a.secIdx,1),d("#"+h).prev(".weluka-horizontal-drop-handle").remove(),d("#"+h).remove());e&&"undefined"!==typeof a.rowData.colums[0]&&b._columRefresh(a.rowData.colums[0].id,"row");f&&"undefined"!==typeof a.s_rowData.subcolums[0]&&b._columRefresh(a.s_rowData.subcolums[0].id,"s_row");b._modelEmpty()},_modelEmpty:function(){if(0==welukaContentModel.sections.length){var a=
b._getAddWidgetData("new","new");0!=a&&(welukaBuilderWp.flg_weluka_theme?"welukahd"==welukaBuilderWp.post_type?(d("#weluka-main-header "+b._builderContentId).append(a.html),d("#weluka-main-header .weluka-horizontal-drop-handle").remove()):"welukaft"==welukaBuilderWp.post_type?(d("#weluka-main-footer "+b._builderContentId).append(a.html),d("#weluka-main-footer .weluka-horizontal-drop-handle").remove()):"welukasd"==welukaBuilderWp.post_type?(d(".weluka-sidebar "+b._builderContentId).append(a.html),
d(".weluka-sidebar .weluka-horizontal-drop-handle").remove()):(d("#main-content "+b._builderContentId).append(a.html),d("#main-content .weluka-horizontal-drop-handle").remove()):(d(b._builderContentId).append(a.html),d(".weluka-horizontal-drop-handle").remove()))}},_columRefresh:function(a,c){var e=d("#"+a),f=b._columMaxNum,g=b._getCurrentColumn(a,c),h=g.length,k=12,l=0,m,l=f%h,k=0==l?f/h:(f-l)/h;m=k+l;g.each(function(a){l=h==a+1?m:k;b._removeColClass(d(this));d(this).addClass("weluka-col-md-"+l)});
b._setCurrentEditInfo(e);e=f=null;"s_row"==c?(f=b._getModelContent(c)?b._getModelContent(c):null,f.s_rowData&&f.s_rowData.subcolums&&(e=f.s_rowData.subcolums)):(f=b._getModelContent(c)?b._getModelContent(c):null,f.rowData&&f.rowData.colums&&(e=f.rowData.colums));if(e&&0<e.length)for(f=0;f<e.length;f++)l=f+1==e.length?m:k,e[f].col=l},_getCurrentColumn:function(a,c){var b;b="s_row"==c?".weluka-s-col-block":".weluka-col-block";return d("#"+a).siblings(b).addBack()},_removeColClass:function(a){var c;
c=b._checkColClass(a,"weluka-col-md-");0!=c&&a.removeClass(c)},_checkColClass:function(a,c){var d,f=!1;for(d=1;d<=b._columMaxNum;d++)if(a.hasClass(c+d)){f=c+d;break}return f},_sectionBlock:function(a,c){var e=c.next(".weluka-section-block")?c.next(".weluka-section-block").attr("id"):null,f=null,g=null,g=g=null;null!=e&&(f=b._getSectionIndex(e));if(a.dragAddType&&""!=a.dragAddType)g=b._getAddWidgetData(a.dragAddType,"section"),0!=g&&(d(g.html).insertBefore(c),null!=e&&null!=f?welukaContentModel.sections.splice(f,
0,g.jsonData):welukaContentModel.sections.push(g.jsonData));else{if(!a.dragId)return!1;b._setCurrentEditInfo(d("#"+a.dragId));g=b._getModelContent(a.dragObject);d("#"+a.dragId);if("s_widget"==a.dragObject)g=g.s_widgetData;else if("s_col"==a.dragObject)g=g.s_colData;else if("s_row"==a.dragObject)g=g.s_rowData;else if("widget"==a.dragObject)g=g.widgetData;else if("col"==a.dragObject)g=g.colData;else if("row"==a.dragObject)g=g.rowData;else if("section"==a.dragObject)g=g.sectionData;else return!1;g=b._getMoveData(a.dragObject,
"section",g);0!=g&&(null!=e&&null!=f?welukaContentModel.sections.splice(f,0,g.jsonData):welukaContentModel.sections.push(g.jsonData),d(g.html).insertBefore(c),b._widgetModelAndDomRemove(b._getModelContent(a.dragObject),a.dragObject),b._columRefresh(g.jsonData.rows[0].colums[0].id,"row"))}},_rowBlock:function(a,c,e){e=c.next(".weluka-row-block")?c.next(".weluka-row-block").attr("id"):null;var f=null,g=null,h=g=g=null,h=null;null==e?(h=c.closest(".weluka-section-block")?c.closest(".weluka-section-block").attr("id"):
null,h=b._getSectionIndex(h)):(b._setCurrentEditInfo(d("#"+e)),f=b._getModelContent("row"),d("#"+e));if(a.dragAddType&&""!=a.dragAddType)g=b._getAddWidgetData(a.dragAddType,"row"),0!=g&&(d(g.html).insertBefore(c),null!=e?welukaContentModel.sections[f.secIdx].rows.splice(f.rowIdx,0,g.jsonData):welukaContentModel.sections[h].rows.push(g.jsonData));else{if(!a.dragId)return!1;b._setCurrentEditInfo(d("#"+a.dragId));g=b._getModelContent(a.dragObject);d("#"+a.dragId);if("widget"==a.dragObject)g=g.widgetData;
else if("col"==a.dragObject)g=g.colData;else if("s_col"==a.dragObject)g=g.s_colData;else if("s_row"==a.dragObject)g=g.s_rowData;else if("s_widget"==a.dragObject)g=g.s_widgetData;else if("row"==a.dragObject)g=g.rowData;else return!1;g=b._getMoveData(a.dragObject,"row",g);0!=g&&(null!=e?welukaContentModel.sections[f.secIdx].rows.splice(f.rowIdx,0,g.jsonData):welukaContentModel.sections[h].rows.push(g.jsonData),d(g.html).insertBefore(c),b._widgetModelAndDomRemove(b._getModelContent(a.dragObject),a.dragObject),
b._columRefresh(g.jsonData.colums[0].id,"row"))}},_widgetBlock:function(a,c,e){var f=c.closest(".weluka-widget")?c.closest(".weluka-widget").attr("id"):null,g=c=null,h=null,h=null;if(null==f)return!1;b._setCurrentEditInfo(d("#"+f));c=b._getModelContent("widget");g=d("#"+f);if(a.dragAddType&&""!=a.dragAddType)f=b._getAddWidgetData(a.dragAddType,"widget"),0!=f&&("col-top-in"==e?(d(f.html).insertBefore(g),welukaContentModel.sections[c.secIdx].rows[c.rowIdx].colums[c.colIdx].items.splice(c.widgetIdx,
0,f.jsonData)):(d(f.html).insertAfter(g),welukaContentModel.sections[c.secIdx].rows[c.rowIdx].colums[c.colIdx].items.splice(c.widgetIdx+1,0,f.jsonData)));else{if(!a.dragId)return!1;b._setCurrentEditInfo(d("#"+a.dragId));h=b._getModelContent(a.dragObject);d("#"+a.dragId);if("widget"==a.dragObject)h=h.widgetData;else if("s_row"==a.dragObject)h=h.s_rowData;else if("s_col"==a.dragObject)h=h.s_colData;else if("s_widget"==a.dragObject)h=h.s_widgetData;else return!1;f=b._getMoveData(a.dragObject,"widget",
h);0!=f&&("col-top-in"==e?(d(f.html).insertBefore(g),welukaContentModel.sections[c.secIdx].rows[c.rowIdx].colums[c.colIdx].items.splice(c.widgetIdx,0,f.jsonData)):(d(f.html).insertAfter(g),welukaContentModel.sections[c.secIdx].rows[c.rowIdx].colums[c.colIdx].items.splice(c.widgetIdx+1,0,f.jsonData)),b._widgetModelAndDomRemove(b._getModelContent(a.dragObject),a.dragObject))}},_columBlock:function(a,c,e){c=c.closest(".weluka-col-block")?c.closest(".weluka-col-block").attr("id"):null;var f=null,g=null,
h=null;if(null==c)return!1;if(b._getCurrentColumn(c,"").length>=b._columMaxNum)return alert(welukaBuilderWp.msgs.max_column_over),!1;b._setCurrentEditInfo(d("#"+c));f=b._getModelContent("col");g=d("#"+c);if(a.dragAddType&&""!=a.dragAddType)a=b._getAddWidgetData(a.dragAddType,"col"),0!=a&&("col-left-out"==e?(d(a.html).insertBefore(g),welukaContentModel.sections[f.secIdx].rows[f.rowIdx].colums.splice(f.colIdx,0,a.jsonData)):(d(a.html).insertAfter(g),welukaContentModel.sections[f.secIdx].rows[f.rowIdx].colums.splice(f.colIdx+
1,0,a.jsonData)),b._columRefresh(c,"row"));else{if(!a.dragId)return!1;b._setCurrentEditInfo(d("#"+a.dragId));h=b._getModelContent(a.dragObject);d("#"+a.dragId);var k=null,k=null;if("widget"==a.dragObject)k=h.widgetData;else if("col"==a.dragObject)k=h.colData;else if("s_col"==a.dragObject)k=h.s_colData;else if("s_widget"==a.dragObject)k=h.s_widgetData;else return!1;k=b._getMoveData(a.dragObject,"col",k);0!=k&&("col-left-out"==e?(d(k.html).insertBefore(g),welukaContentModel.sections[f.secIdx].rows[f.rowIdx].colums.splice(f.colIdx,
0,k.jsonData)):(d(k.html).insertAfter(g),welukaContentModel.sections[f.secIdx].rows[f.rowIdx].colums.splice(f.colIdx+1,0,k.jsonData)),b._widgetModelAndDomRemove(b._getModelContent(a.dragObject),a.dragObject),b._columRefresh(c,"row"))}},_s_rowBlock:function(a,c,e){e=c.next(".weluka-s-row-block")?c.next(".weluka-s-row-block").attr("id"):null;var f=null,g=null,f=g=g=null;null==e?(f=c.closest(".weluka-widget")?c.closest(".weluka-widget").attr("id"):null,b._setCurrentEditInfo(d("#"+f)),f=b._getModelContent("widget")):
(b._setCurrentEditInfo(d("#"+e)),f=b._getModelContent("s_row"));if(a.dragAddType&&""!=a.dragAddType)g=b._getAddWidgetData(a.dragAddType,"s_row"),0!=g&&(d(g.html).insertBefore(c),null!=e?welukaContentModel.sections[f.secIdx].rows[f.rowIdx].colums[f.colIdx].items[f.widgetIdx].subrows.splice(f.s_rowIdx,0,g.jsonData):welukaContentModel.sections[f.secIdx].rows[f.rowIdx].colums[f.colIdx].items[f.widgetIdx].subrows.push(g.jsonData));else{if(!a.dragId)return!1;b._setCurrentEditInfo(d("#"+a.dragId));g=b._getModelContent(a.dragObject);
d("#"+a.dragId);if("widget"==a.dragObject)g=g.widgetData;else if("s_col"==a.dragObject)g=g.s_colData;else if("s_widget"==a.dragObject)g=g.s_widgetData;else if("s_row"==a.dragObject)g=g.s_rowData;else return!1;g=b._getMoveData(a.dragObject,"s_row",g);0!=g&&(null!=e?welukaContentModel.sections[f.secIdx].rows[f.rowIdx].colums[f.colIdx].items[f.widgetIdx].subrows.splice(f.s_rowIdx,0,g.jsonData):welukaContentModel.sections[f.secIdx].rows[f.rowIdx].colums[f.colIdx].items[f.widgetIdx].subrows.push(g.jsonData),
d(g.html).insertBefore(c),b._widgetModelAndDomRemove(b._getModelContent(a.dragObject),a.dragObject),b._columRefresh(g.jsonData.subcolums[0].id,"s_row"))}},_s_widgetBlock:function(a,c,e){var f=c.closest(".weluka-s-widget")?c.closest(".weluka-s-widget").attr("id"):null,g=c=null,h=null,k=null;if(null==f)return!1;b._setCurrentEditInfo(d("#"+f));c=b._getModelContent("s_widget");g=d("#"+f);if(a.dragAddType&&""!=a.dragAddType)f=b._getAddWidgetData(a.dragAddType,"s_widget"),0!=f&&("s-col-top-in"==e?(d(f.html).insertBefore(g),
welukaContentModel.sections[c.secIdx].rows[c.rowIdx].colums[c.colIdx].items[c.widgetIdx].subrows[c.s_rowIdx].subcolums[c.s_colIdx].subitems.splice(c.s_widgetIdx,0,f.jsonData)):(d(f.html).insertAfter(g),welukaContentModel.sections[c.secIdx].rows[c.rowIdx].colums[c.colIdx].items[c.widgetIdx].subrows[c.s_rowIdx].subcolums[c.s_colIdx].subitems.splice(c.s_widgetIdx+1,0,f.jsonData)));else{if(!a.dragId)return!1;b._setCurrentEditInfo(d("#"+a.dragId));h=b._getModelContent(a.dragObject);d("#"+a.dragId);if("widget"==
a.dragObject){if(k=h.widgetData,"undefined"!=typeof k.subrows)return!1}else"s_widget"==a.dragObject&&(k=h.s_widgetData);f=b._getMoveData(a.dragObject,"s_widget",k);0!=f&&("s-col-top-in"==e?(d(f.html).insertBefore(g),welukaContentModel.sections[c.secIdx].rows[c.rowIdx].colums[c.colIdx].items[c.widgetIdx].subrows[c.s_rowIdx].subcolums[c.s_colIdx].subitems.splice(c.s_widgetIdx,0,f.jsonData)):(d(f.html).insertAfter(g),welukaContentModel.sections[c.secIdx].rows[c.rowIdx].colums[c.colIdx].items[c.widgetIdx].subrows[c.s_rowIdx].subcolums[c.s_colIdx].subitems.splice(c.s_widgetIdx+
1,0,f.jsonData)),b._widgetModelAndDomRemove(b._getModelContent(a.dragObject),"s_widget"))}},_s_columBlock:function(a,c,e){var f=null,g=null,h=null,k=h=null,h=null,h=c.closest(".weluka-widget").attr("id");if(null==h)return!1;b._setCurrentEditInfo(d("#"+h));f=b._getModelContent("widget");g=d("#"+h);if(a.dragAddType&&""!=a.dragAddType)h=b._getAddWidgetData2(a.dragAddType,"widget_col",f.widgetData,e),0!=h&&(g.replaceWith(h.html),welukaContentModel.sections[f.secIdx].rows[f.rowIdx].colums[f.colIdx].items.splice(f.widgetIdx,
1,h.jsonData));else{if(!a.dragId||a.dragId==h)return!1;b._setCurrentEditInfo(d("#"+a.dragId));h=b._getModelContent(a.dragObject);d("#"+a.dragId);if("widget"==a.dragObject){if(k=h.widgetData,"undefined"!=typeof k.subrows)return!1}else"s_widget"==a.dragObject&&(k=h.s_widgetData);h=b._getMoveData2(a.dragObject,"widget_col",k,f.widgetData,e);0!=h&&(0!=h&&(g.replaceWith(h.html),welukaContentModel.sections[f.secIdx].rows[f.rowIdx].colums[f.colIdx].items.splice(f.widgetIdx,1,h.jsonData)),b._widgetModelAndDomRemove(b._getModelContent(a.dragObject),
a.dragObject))}},_s_in_columBlock:function(a,c,e){c=c.closest(".weluka-s-col-block")?c.closest(".weluka-s-col-block").attr("id"):null;var f=null,g=null,h=null;if(null==c)return!1;if(b._getCurrentColumn(c,"s_row").length>=b._columMaxNum)return alert(welukaBuilderWp.msgs.max_column_over),!1;b._setCurrentEditInfo(d("#"+c));f=b._getModelContent("s_col");g=d("#"+c);if(a.dragAddType&&""!=a.dragAddType)a=b._getAddWidgetData(a.dragAddType,"s_col"),0!=a&&("s-in-col-left-out"==e?(d(a.html).insertBefore(g),
welukaContentModel.sections[f.secIdx].rows[f.rowIdx].colums[f.colIdx].items[f.widgetIdx].subrows[f.s_rowIdx].subcolums.splice(f.s_colIdx,0,a.jsonData)):(d(a.html).insertAfter(g),welukaContentModel.sections[f.secIdx].rows[f.rowIdx].colums[f.colIdx].items[f.widgetIdx].subrows[f.s_rowIdx].subcolums.splice(f.s_colIdx+1,0,a.jsonData)),b._columRefresh(c,"s_row"));else{if(!a.dragId)return!1;b._setCurrentEditInfo(d("#"+a.dragId));h=b._getModelContent(a.dragObject);d("#"+a.dragId);var k=null,k=null;if("widget"==
a.dragObject){if(k=h.widgetData,"undefined"!=typeof k.subrows)return!1}else if("s_widget"==a.dragObject)k=h.s_widgetData;else if("s_col"==a.dragObject)k=h.s_colData;else return!1;k=b._getMoveData(a.dragObject,"s_col",k);0!=k&&("s-in-col-left-out"==e?(d(k.html).insertBefore(g),welukaContentModel.sections[f.secIdx].rows[f.rowIdx].colums[f.colIdx].items[f.widgetIdx].subrows[f.s_rowIdx].subcolums.splice(f.s_colIdx,0,k.jsonData)):(d(k.html).insertAfter(g),welukaContentModel.sections[f.secIdx].rows[f.rowIdx].colums[f.colIdx].items[f.widgetIdx].subrows[f.s_rowIdx].subcolums.splice(f.s_colIdx+
1,0,k.jsonData)),b._widgetModelAndDomRemove(b._getModelContent(a.dragObject),a.dragObject),b._columRefresh(c,"s_row"))}},_newContentModel:function(a,c){var e=b._getAddWidgetData(a.dragAddType,"section");0!=e&&(e.html+='<div class="weluka-droppable weluka-horizontal-drop-handle" data-weluka-drop-position="section"></div>',d("#weluka-new-blank").replaceWith(e.html),welukaContentModel={sections:[e.jsonData],pagesetting:welukaContentModel.pagesetting?welukaContentModel.pagesetting:null})},_getAddWidgetData:function(a,
c){var b=!1;d.ajax({type:"post",async:!1,url:welukaBuilderWp.ajax_url,data:{action:"weluka_add_widgetdata",nonce:welukaBuilderWp.nonces.weluka_add_widgetdata,widgetType:a,addBlock:c,postId:window.parent.welukaAdmin.getCurrentPostId()},dataType:"json",error:function(a,c,b){console.log(b.message)},success:function(a){""!=a.msg?console.log(a.msg):b=a}});return b},_getAddWidgetData2:function(a,c,b,f){var g=!1;d.ajax({type:"post",async:!1,url:welukaBuilderWp.ajax_url,data:{action:"weluka_add_widgetdata",
nonce:welukaBuilderWp.nonces.weluka_add_widgetdata,widgetType:a,addBlock:c,data:b,position:f,postId:window.parent.welukaAdmin.getCurrentPostId()},dataType:"json",error:function(a,c,b){console.log(b.message)},success:function(a){""!=a.msg?console.log(a.msg):g=a}});return g},_getMoveData:function(a,c,b){var f=!1;b=JSON.stringify(b);d.ajax({type:"post",async:!1,url:welukaBuilderWp.ajax_url,scriptCharset:"utf-8",data:{action:"weluka_move_data",nonce:welukaBuilderWp.nonces.weluka_move_data,moveType:a,
addBlock:c,moveModel:b},dataType:"json",error:function(a,c,b){console.log(b.message)},success:function(a){""!=a.msg?console.log(a.msg):f=a}});return f},_getMoveData2:function(a,c,b,f,g){var h=!1;b=JSON.stringify(b);f=JSON.stringify(f);d.ajax({type:"post",async:!1,url:welukaBuilderWp.ajax_url,scriptCharset:"utf-8",data:{action:"weluka_move_data",nonce:welukaBuilderWp.nonces.weluka_move_data,moveType:a,addBlock:c,moveModel:b,data:f,position:g},dataType:"json",error:function(a,c,b){console.log(b.message)},
success:function(a){""!=a.msg?console.log(a.msg):h=a}});return h},_getHtml:function(a,c,b){var f=!1;a=JSON.stringify(a);d.ajax({type:"post",async:!1,url:welukaBuilderWp.ajax_url,scriptCharset:"utf-8",data:{action:"weluka_get_html",nonce:welukaBuilderWp.nonces.weluka_get_html,type:c,block:b,model:a},dataType:"json",error:function(a,c,b){console.log(b.message)},success:function(a){""!=a.msg?console.log(a.msg):f=a}});return f},_partialData:function(a,c,b,f){f=f||"";var g=!1;c=JSON.stringify(c);d.ajax({type:"post",
async:!1,url:welukaBuilderWp.ajax_url,scriptCharset:"utf-8",data:{action:"weluka_partial",nonce:welukaBuilderWp.nonces.weluka_partial,mode:a,model:c,type:b,name:f},dataType:"json",error:function(a,c,b){console.log(b.message)},success:function(a){""!=a.msg?console.log(a.msg):g=a}});return g}},r={tinymceSaved:function(a){b._tinymceSaved(a)},stringify:function(a){var c=typeof a;if("object"!=c||null===a)return"string"==c&&(a='"'+a+'"'),String(a);var b,d,g=[],h=a&&a.constructor==Array;for(b in a)d=a[b],
c=typeof d,a.hasOwnProperty(b)&&("string"==c?d='"'+d+'"':"object"==c&&null!==d&&(d=r.stringify(d)),g.push((h?"":'"'+b+'":')+String(d)));return(h?"[":"{")+String(g)+(h?"]":"}")},strip_tags:function(a,b){b=(((b||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return a.replace(/\x3c!--[\s\S]*?--\x3e|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(a,d){return-1<b.indexOf("<"+d.toLowerCase()+">")?a:""})},uuid:function(){var a=function(){return(65536*(1+Math.random())|
0).toString(16).substring(1)};return a()+a()+""+a()+""+a()+""+a()+""+a()+a()+a()},addslashes:function(a){return(a+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")}};d(document).ready(function(){t.welukaBuilder=r;b._init()})})(jQuery,this);